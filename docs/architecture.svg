<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 960" style="background:#0d1117;border-radius:12px">
  <defs>
    <filter id="shadow" x="-4%" y="-4%" width="108%" height="108%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.4"/>
    </filter>
    <marker id="arrow-blue" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#3b82f6"/>
    </marker>
    <marker id="arrow-cyan" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#06b6d4"/>
    </marker>
    <marker id="arrow-amber" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#f59e0b"/>
    </marker>
    <marker id="arrow-green" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#4ade80"/>
    </marker>
    <marker id="arrow-purple" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#8b5cf6"/>
    </marker>
    <marker id="arrow-pink" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#f472b6"/>
    </marker>
    <marker id="arrow-gray" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#64748b"/>
    </marker>
    <linearGradient id="bg-grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#0d1117"/>
      <stop offset="100%" stop-color="#161b22"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="1200" height="960" rx="12" fill="url(#bg-grad)"/>

  <!-- Title -->
  <text x="600" y="38" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="22" font-weight="700" fill="#e6edf3">Agent Orcha — Architecture</text>
  <text x="600" y="56" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" fill="#7d8590">Declarative AI Agent Orchestration Platform</text>

  <!-- ═══════════════════════════════════════════ -->
  <!-- FRONTEND UI (left column)                   -->
  <!-- ═══════════════════════════════════════════ -->
  <rect x="20" y="80" width="155" height="260" rx="10" fill="#1c2333" stroke="#3b82f6" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="97" y="100" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="11" font-weight="700" fill="#3b82f6">Frontend UI</text>
  <text x="97" y="114" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Web Dashboard</text>

  <rect x="32" y="124" width="131" height="22" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75"/>
  <text x="97" y="139" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#93c5fd">Agent Studio</text>

  <rect x="32" y="152" width="131" height="22" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75"/>
  <text x="97" y="167" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#93c5fd">Workflow Runner</text>

  <rect x="32" y="180" width="131" height="22" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75"/>
  <text x="97" y="195" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#93c5fd">Knowledge Search</text>

  <rect x="32" y="208" width="131" height="22" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75"/>
  <text x="97" y="223" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#93c5fd">Graph Visualization</text>

  <rect x="32" y="236" width="131" height="22" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75"/>
  <text x="97" y="251" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#93c5fd">IDE / File Editor</text>

  <rect x="32" y="264" width="131" height="22" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75"/>
  <text x="97" y="279" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#93c5fd">Task Monitor</text>

  <rect x="32" y="292" width="131" height="22" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75"/>
  <text x="97" y="307" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#93c5fd">Settings / Config</text>

  <!-- Arrow: UI → API -->
  <line x1="175" y1="210" x2="198" y2="210" stroke="#3b82f6" stroke-width="1.5" marker-end="url(#arrow-blue)"/>

  <!-- ═══════════════════════════════════════════ -->
  <!-- INPUTS / API LAYER                          -->
  <!-- ═══════════════════════════════════════════ -->
  <rect x="200" y="80" width="780" height="70" rx="10" fill="#1c2333" stroke="#06b6d4" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="590" y="98" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="11" font-weight="700" fill="#06b6d4">Input Layer</text>

  <!-- HTTP/REST API -->
  <rect x="215" y="107" width="130" height="32" rx="6" fill="#1e293b" stroke="#22d3ee" stroke-width="1"/>
  <text x="280" y="121" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#22d3ee">REST API</text>
  <text x="280" y="133" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Fastify Server</text>

  <!-- WebSocket -->
  <rect x="355" y="107" width="130" height="32" rx="6" fill="#1e293b" stroke="#22d3ee" stroke-width="1"/>
  <text x="420" y="121" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#22d3ee">ColabNook WS</text>
  <text x="420" y="133" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Chat Integration</text>

  <!-- Cron -->
  <rect x="495" y="107" width="130" height="32" rx="6" fill="#1e293b" stroke="#22d3ee" stroke-width="1"/>
  <text x="560" y="121" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#22d3ee">Cron Triggers</text>
  <text x="560" y="133" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Scheduled Tasks</text>

  <!-- Webhooks -->
  <rect x="635" y="107" width="130" height="32" rx="6" fill="#1e293b" stroke="#22d3ee" stroke-width="1"/>
  <text x="700" y="121" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#22d3ee">Webhooks</text>
  <text x="700" y="133" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">HTTP Triggers</text>

  <!-- SSE Streaming -->
  <rect x="775" y="107" width="130" height="32" rx="6" fill="#1e293b" stroke="#22d3ee" stroke-width="1"/>
  <text x="840" y="121" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#22d3ee">SSE Streaming</text>
  <text x="840" y="133" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Real-time Output</text>

  <!-- ═══════════════════════════════════════════ -->
  <!-- LLM PROVIDERS (right column)                -->
  <!-- ═══════════════════════════════════════════ -->
  <rect x="1000" y="80" width="180" height="260" rx="10" fill="#1c2333" stroke="#f59e0b" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="1090" y="100" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="11" font-weight="700" fill="#f59e0b">LLM Providers</text>
  <text x="1090" y="114" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">LLMFactory + Config</text>

  <rect x="1012" y="124" width="156" height="26" rx="4" fill="#1e293b" stroke="#fbbf24" stroke-width="0.75"/>
  <text x="1090" y="141" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" fill="#fde68a">OpenAI / GPT-4</text>

  <rect x="1012" y="156" width="156" height="26" rx="4" fill="#1e293b" stroke="#fbbf24" stroke-width="0.75"/>
  <text x="1090" y="173" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" fill="#fde68a">Anthropic / Claude</text>

  <rect x="1012" y="188" width="156" height="26" rx="4" fill="#1e293b" stroke="#fbbf24" stroke-width="0.75"/>
  <text x="1090" y="205" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" fill="#fde68a">Google Gemini</text>

  <rect x="1012" y="220" width="156" height="26" rx="4" fill="#1e293b" stroke="#fbbf24" stroke-width="0.75"/>
  <text x="1090" y="237" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" fill="#fde68a">Ollama (Local)</text>

  <rect x="1012" y="252" width="156" height="26" rx="4" fill="#1e293b" stroke="#fbbf24" stroke-width="0.75"/>
  <text x="1090" y="269" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" fill="#fde68a">LM Studio (Local)</text>

  <rect x="1012" y="290" width="156" height="22" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75" stroke-dasharray="4 2"/>
  <text x="1090" y="305" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#7d8590">Embeddings</text>

  <!-- ═══════════════════════════════════════════ -->
  <!-- ORCHESTRATOR (central hub)                  -->
  <!-- ═══════════════════════════════════════════ -->
  <rect x="350" y="170" width="480" height="64" rx="10" fill="#162032" stroke="#06b6d4" stroke-width="2" filter="url(#shadow)"/>
  <text x="590" y="195" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="14" font-weight="700" fill="#22d3ee">Orchestrator</text>
  <text x="590" y="210" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#7d8590">Central hub — initializes all components, manages lifecycle, exposes typed accessors</text>

  <!-- Arrow: Inputs → Orchestrator -->
  <line x1="590" y1="150" x2="590" y2="168" stroke="#06b6d4" stroke-width="1.5" marker-end="url(#arrow-cyan)"/>

  <!-- Arrow: Orchestrator → LLM -->
  <line x1="830" y1="202" x2="998" y2="202" stroke="#f59e0b" stroke-width="1.5" marker-end="url(#arrow-amber)"/>

  <!-- ═══════════════════════════════════════════ -->
  <!-- AGENT LAYER                                 -->
  <!-- ═══════════════════════════════════════════ -->
  <rect x="200" y="260" width="360" height="130" rx="10" fill="#1c2333" stroke="#4ade80" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="380" y="280" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="11" font-weight="700" fill="#4ade80">Agent Execution Layer</text>

  <rect x="215" y="290" width="150" height="44" rx="6" fill="#1e293b" stroke="#4ade80" stroke-width="0.75"/>
  <text x="290" y="308" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#86efac">AgentExecutor</text>
  <text x="290" y="321" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">invoke() / stream()</text>

  <rect x="375" y="290" width="100" height="44" rx="6" fill="#1e293b" stroke="#4ade80" stroke-width="0.75"/>
  <text x="425" y="308" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#86efac">AgentLoader</text>
  <text x="425" y="321" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">.agent.yaml</text>

  <rect x="215" y="340" width="105" height="40" rx="6" fill="#1e293b" stroke="#334155" stroke-width="0.75" stroke-dasharray="4 2"/>
  <text x="267" y="356" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#a7f3d0">Skills</text>
  <text x="267" y="368" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">SKILL.md prompts</text>

  <rect x="328" y="340" width="105" height="40" rx="6" fill="#1e293b" stroke="#334155" stroke-width="0.75" stroke-dasharray="4 2"/>
  <text x="380" y="356" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#a7f3d0">Memory</text>
  <text x="380" y="368" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Conversation + LTM</text>

  <rect x="441" y="340" width="105" height="40" rx="6" fill="#1e293b" stroke="#334155" stroke-width="0.75" stroke-dasharray="4 2"/>
  <text x="493" y="356" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#a7f3d0">Structured Output</text>
  <text x="493" y="368" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">JSON schema validation</text>

  <!-- Arrow: Orchestrator → Agent Layer -->
  <line x1="490" y1="234" x2="380" y2="258" stroke="#4ade80" stroke-width="1.5" marker-end="url(#arrow-green)"/>

  <!-- ═══════════════════════════════════════════ -->
  <!-- WORKFLOW LAYER                              -->
  <!-- ═══════════════════════════════════════════ -->
  <rect x="580" y="260" width="400" height="130" rx="10" fill="#1c2333" stroke="#8b5cf6" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="780" y="280" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="11" font-weight="700" fill="#8b5cf6">Workflow Orchestration Layer</text>

  <rect x="595" y="290" width="120" height="44" rx="6" fill="#1e293b" stroke="#8b5cf6" stroke-width="0.75"/>
  <text x="655" y="308" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" font-weight="600" fill="#c4b5fd">WorkflowExecutor</text>
  <text x="655" y="321" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Step-based flows</text>

  <rect x="725" y="290" width="120" height="44" rx="6" fill="#1e293b" stroke="#8b5cf6" stroke-width="0.75"/>
  <text x="785" y="308" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" font-weight="600" fill="#c4b5fd">LangGraphExecutor</text>
  <text x="785" y="321" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">ReAct agent loops</text>

  <rect x="855" y="290" width="110" height="44" rx="6" fill="#1e293b" stroke="#8b5cf6" stroke-width="0.75"/>
  <text x="910" y="308" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" font-weight="600" fill="#c4b5fd">WorkflowLoader</text>
  <text x="910" y="321" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">.workflow.yaml</text>

  <rect x="595" y="340" width="160" height="40" rx="6" fill="#1e293b" stroke="#334155" stroke-width="0.75" stroke-dasharray="4 2"/>
  <text x="675" y="356" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#ddd6fe">Interrupt Manager</text>
  <text x="675" y="368" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Pause / resume with user input</text>

  <rect x="765" y="340" width="200" height="40" rx="6" fill="#1e293b" stroke="#334155" stroke-width="0.75" stroke-dasharray="4 2"/>
  <text x="865" y="356" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#ddd6fe">Task Manager</text>
  <text x="865" y="368" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Async execution, cancel, status tracking</text>

  <!-- Arrow: Orchestrator → Workflow Layer -->
  <line x1="690" y1="234" x2="780" y2="258" stroke="#8b5cf6" stroke-width="1.5" marker-end="url(#arrow-purple)"/>

  <!-- ═══════════════════════════════════════════ -->
  <!-- TOOL REGISTRY (center)                      -->
  <!-- ═══════════════════════════════════════════ -->
  <rect x="250" y="415" width="700" height="55" rx="10" fill="#162032" stroke="#f59e0b" stroke-width="2" filter="url(#shadow)"/>
  <text x="600" y="440" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="13" font-weight="700" fill="#fbbf24">Tool Registry</text>
  <text x="600" y="455" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#7d8590">Resolves tool references from agents/workflows → MCP, Knowledge, Functions, Sandbox, Project, Built-in</text>

  <!-- Arrow: Agent Layer → Tool Registry -->
  <line x1="380" y1="390" x2="480" y2="413" stroke="#f59e0b" stroke-width="1.5" marker-end="url(#arrow-amber)"/>

  <!-- Arrow: Workflow Layer → Tool Registry -->
  <line x1="780" y1="390" x2="700" y2="413" stroke="#f59e0b" stroke-width="1.5" marker-end="url(#arrow-amber)"/>

  <!-- ═══════════════════════════════════════════ -->
  <!-- BOTTOM ROW: Tool Sources                    -->
  <!-- ═══════════════════════════════════════════ -->

  <!-- Knowledge -->
  <rect x="20" y="500" width="225" height="190" rx="10" fill="#1c2333" stroke="#f472b6" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="132" y="520" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="11" font-weight="700" fill="#f472b6">Knowledge Layer</text>
  <text x="132" y="534" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Semantic Search &amp; GraphRAG</text>

  <rect x="32" y="544" width="100" height="34" rx="4" fill="#1e293b" stroke="#f9a8d4" stroke-width="0.75"/>
  <text x="82" y="558" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" font-weight="600" fill="#fbcfe8">Vector RAG</text>
  <text x="82" y="569" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Similarity search</text>

  <rect x="140" y="544" width="95" height="34" rx="4" fill="#1e293b" stroke="#f9a8d4" stroke-width="0.75"/>
  <text x="187" y="558" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" font-weight="600" fill="#fbcfe8">GraphRAG</text>
  <text x="187" y="569" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Entity graphs</text>

  <rect x="32" y="584" width="203" height="22" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75"/>
  <text x="133" y="599" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#fda4af">Stores: Memory, Chroma, Pinecone, Qdrant</text>

  <rect x="32" y="612" width="203" height="22" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75"/>
  <text x="133" y="627" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#fda4af">Splitters: recursive, token, markdown</text>

  <text x="132" y="652" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" font-weight="600" fill="#7d8590">Data Loaders</text>
  <rect x="32" y="658" width="40" height="20" rx="3" fill="#1e293b" stroke="#334155" stroke-width="0.5"/>
  <text x="52" y="672" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#fda4af">Files</text>
  <rect x="76" y="658" width="33" height="20" rx="3" fill="#1e293b" stroke="#334155" stroke-width="0.5"/>
  <text x="92" y="672" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#fda4af">DB</text>
  <rect x="113" y="658" width="35" height="20" rx="3" fill="#1e293b" stroke="#334155" stroke-width="0.5"/>
  <text x="130" y="672" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#fda4af">Web</text>
  <rect x="152" y="658" width="30" height="20" rx="3" fill="#1e293b" stroke="#334155" stroke-width="0.5"/>
  <text x="167" y="672" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#fda4af">S3</text>
  <rect x="186" y="658" width="45" height="20" rx="3" fill="#1e293b" stroke="#334155" stroke-width="0.5"/>
  <text x="208" y="672" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#fda4af">Directory</text>

  <!-- Arrow: Tool Registry → Knowledge -->
  <line x1="400" y1="470" x2="200" y2="498" stroke="#f472b6" stroke-width="1.5" marker-end="url(#arrow-pink)"/>

  <!-- MCP Servers -->
  <rect x="260" y="500" width="175" height="130" rx="10" fill="#1c2333" stroke="#fb923c" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="347" y="520" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="11" font-weight="700" fill="#fb923c">MCP Servers</text>
  <text x="347" y="534" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Model Context Protocol</text>

  <rect x="272" y="544" width="151" height="22" rx="4" fill="#1e293b" stroke="#fdba74" stroke-width="0.75"/>
  <text x="347" y="559" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#fed7aa">stdio / HTTP / SSE transports</text>

  <rect x="272" y="572" width="151" height="22" rx="4" fill="#1e293b" stroke="#fdba74" stroke-width="0.75"/>
  <text x="347" y="587" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#fed7aa">Lazy tool loading + caching</text>

  <rect x="272" y="600" width="151" height="22" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75" stroke-dasharray="4 2"/>
  <text x="347" y="615" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Filesystem, DB, Custom...</text>

  <!-- Arrow: Tool Registry → MCP -->
  <line x1="460" y1="470" x2="380" y2="498" stroke="#fb923c" stroke-width="1.5"/>

  <!-- Functions -->
  <rect x="450" y="500" width="150" height="100" rx="10" fill="#1c2333" stroke="#a78bfa" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="525" y="520" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="11" font-weight="700" fill="#a78bfa">Functions</text>
  <text x="525" y="534" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Custom JS Tools</text>

  <rect x="462" y="544" width="126" height="22" rx="4" fill="#1e293b" stroke="#c4b5fd" stroke-width="0.75"/>
  <text x="525" y="559" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#ddd6fe">*.function.js files</text>

  <rect x="462" y="572" width="126" height="22" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75" stroke-dasharray="4 2"/>
  <text x="525" y="587" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Auto-wrapped as tools</text>

  <!-- Arrow: Tool Registry → Functions -->
  <line x1="540" y1="470" x2="525" y2="498" stroke="#a78bfa" stroke-width="1.5"/>

  <!-- Sandbox -->
  <rect x="615" y="500" width="200" height="190" rx="10" fill="#1c2333" stroke="#ef4444" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="715" y="520" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="11" font-weight="700" fill="#ef4444">Sandbox</text>
  <text x="715" y="534" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Docker Containerized Execution</text>

  <rect x="627" y="544" width="88" height="30" rx="4" fill="#1e293b" stroke="#fca5a5" stroke-width="0.75"/>
  <text x="671" y="558" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" font-weight="600" fill="#fecaca">exec</text>
  <text x="671" y="568" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Run commands</text>

  <rect x="721" y="544" width="82" height="30" rx="4" fill="#1e293b" stroke="#fca5a5" stroke-width="0.75"/>
  <text x="762" y="558" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" font-weight="600" fill="#fecaca">browser</text>
  <text x="762" y="568" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Chromium</text>

  <rect x="627" y="580" width="88" height="30" rx="4" fill="#1e293b" stroke="#fca5a5" stroke-width="0.75"/>
  <text x="671" y="594" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" font-weight="600" fill="#fecaca">web_fetch</text>
  <text x="671" y="604" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">HTML → Markdown</text>

  <rect x="721" y="580" width="82" height="30" rx="4" fill="#1e293b" stroke="#fca5a5" stroke-width="0.75"/>
  <text x="762" y="594" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" font-weight="600" fill="#fecaca">web_search</text>
  <text x="762" y="604" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">DuckDuckGo</text>

  <rect x="627" y="616" width="88" height="30" rx="4" fill="#1e293b" stroke="#fca5a5" stroke-width="0.75"/>
  <text x="671" y="630" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" font-weight="600" fill="#fecaca">read / write</text>
  <text x="671" y="640" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">File operations</text>

  <rect x="721" y="616" width="82" height="30" rx="4" fill="#1e293b" stroke="#fca5a5" stroke-width="0.75"/>
  <text x="762" y="630" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" font-weight="600" fill="#fecaca">edit</text>
  <text x="762" y="640" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Line-based edits</text>

  <rect x="627" y="654" width="176" height="26" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75" stroke-dasharray="4 2"/>
  <text x="715" y="668" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">DockerManager: images, containers, pruning</text>

  <!-- Arrow: Tool Registry → Sandbox -->
  <line x1="680" y1="470" x2="715" y2="498" stroke="#ef4444" stroke-width="1.5"/>

  <!-- Project Tools -->
  <rect x="830" y="500" width="165" height="100" rx="10" fill="#1c2333" stroke="#14b8a6" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="912" y="520" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="11" font-weight="700" fill="#14b8a6">Project Tools</text>
  <text x="912" y="534" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Self-modification</text>

  <rect x="842" y="544" width="141" height="22" rx="4" fill="#1e293b" stroke="#5eead4" stroke-width="0.75"/>
  <text x="912" y="559" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#99f6e4">List / inspect resources</text>

  <rect x="842" y="572" width="141" height="22" rx="4" fill="#1e293b" stroke="#5eead4" stroke-width="0.75"/>
  <text x="912" y="587" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#99f6e4">Hot-reload modified files</text>

  <!-- Arrow: Tool Registry → Project -->
  <line x1="780" y1="470" x2="870" y2="498" stroke="#14b8a6" stroke-width="1.5"/>

  <!-- ═══════════════════════════════════════════ -->
  <!-- CONFIGURATION FILES (bottom)                -->
  <!-- ═══════════════════════════════════════════ -->
  <rect x="20" y="720" width="570" height="80" rx="10" fill="#1c2333" stroke="#64748b" stroke-width="1" filter="url(#shadow)"/>
  <text x="305" y="740" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="11" font-weight="700" fill="#94a3b8">Declarative Configuration</text>
  <text x="305" y="754" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">All components defined via YAML / JSON / Markdown — zero code required</text>

  <rect x="32" y="764" width="80" height="26" rx="4" fill="#1e293b" stroke="#475569" stroke-width="0.75"/>
  <text x="72" y="778" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#cbd5e1">*.agent.yaml</text>

  <rect x="118" y="764" width="95" height="26" rx="4" fill="#1e293b" stroke="#475569" stroke-width="0.75"/>
  <text x="165" y="778" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#cbd5e1">*.workflow.yaml</text>

  <rect x="219" y="764" width="105" height="26" rx="4" fill="#1e293b" stroke="#475569" stroke-width="0.75"/>
  <text x="271" y="778" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#cbd5e1">*.knowledge.yaml</text>

  <rect x="330" y="764" width="75" height="26" rx="4" fill="#1e293b" stroke="#475569" stroke-width="0.75"/>
  <text x="367" y="778" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#cbd5e1">llm.json</text>

  <rect x="411" y="764" width="75" height="26" rx="4" fill="#1e293b" stroke="#475569" stroke-width="0.75"/>
  <text x="448" y="778" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#cbd5e1">mcp.json</text>

  <rect x="492" y="764" width="87" height="26" rx="4" fill="#1e293b" stroke="#475569" stroke-width="0.75"/>
  <text x="535" y="778" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#cbd5e1">sandbox.json</text>

  <!-- ═══════════════════════════════════════════ -->
  <!-- DATA FLOW (bottom right)                    -->
  <!-- ═══════════════════════════════════════════ -->
  <rect x="610" y="720" width="385" height="220" rx="10" fill="#1c2333" stroke="#64748b" stroke-width="1" filter="url(#shadow)"/>
  <text x="802" y="740" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="11" font-weight="700" fill="#94a3b8">Agent Execution Flow</text>

  <!-- Flow steps -->
  <rect x="625" y="752" width="165" height="20" rx="4" fill="#162032" stroke="#3b82f6" stroke-width="0.75"/>
  <text x="707" y="766" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" font-weight="600" fill="#93c5fd">1. Resolve Skills + Memory</text>

  <rect x="625" y="778" width="165" height="20" rx="4" fill="#162032" stroke="#f59e0b" stroke-width="0.75"/>
  <text x="707" y="792" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" font-weight="600" fill="#fde68a">2. Create LLM Instance</text>

  <rect x="625" y="804" width="165" height="20" rx="4" fill="#162032" stroke="#4ade80" stroke-width="0.75"/>
  <text x="707" y="818" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" font-weight="600" fill="#86efac">3. Resolve Tools (Registry)</text>

  <rect x="625" y="830" width="165" height="20" rx="4" fill="#162032" stroke="#8b5cf6" stroke-width="0.75"/>
  <text x="707" y="844" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" font-weight="600" fill="#c4b5fd">4. Build Agent Chain</text>

  <rect x="625" y="856" width="165" height="20" rx="4" fill="#162032" stroke="#06b6d4" stroke-width="0.75"/>
  <text x="707" y="870" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" font-weight="600" fill="#67e8f9">5. invoke() or stream()</text>

  <rect x="625" y="882" width="165" height="20" rx="4" fill="#162032" stroke="#f472b6" stroke-width="0.75"/>
  <text x="707" y="896" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" font-weight="600" fill="#f9a8d4">6. LLM ↔ Tools Loop</text>

  <rect x="625" y="908" width="165" height="20" rx="4" fill="#162032" stroke="#4ade80" stroke-width="0.75"/>
  <text x="707" y="922" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" font-weight="600" fill="#86efac">7. Validate + Return</text>

  <!-- Step arrows -->
  <line x1="707" y1="772" x2="707" y2="776" stroke="#64748b" stroke-width="1"/>
  <line x1="707" y1="798" x2="707" y2="802" stroke="#64748b" stroke-width="1"/>
  <line x1="707" y1="824" x2="707" y2="828" stroke="#64748b" stroke-width="1"/>
  <line x1="707" y1="850" x2="707" y2="854" stroke="#64748b" stroke-width="1"/>
  <line x1="707" y1="876" x2="707" y2="880" stroke="#64748b" stroke-width="1"/>
  <line x1="707" y1="902" x2="707" y2="906" stroke="#64748b" stroke-width="1"/>

  <!-- Tool loop detail -->
  <rect x="810" y="752" width="170" height="176" rx="8" fill="#162032" stroke="#475569" stroke-width="0.75" stroke-dasharray="4 2"/>
  <text x="895" y="770" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" font-weight="600" fill="#94a3b8">Tool Sources</text>

  <text x="825" y="788" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#fb923c">MCP</text>
  <text x="868" y="788" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">External servers</text>

  <text x="825" y="806" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#f472b6">Knowledge</text>
  <text x="893" y="806" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Semantic search</text>

  <text x="825" y="824" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#a78bfa">Functions</text>
  <text x="885" y="824" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Custom JS</text>

  <text x="825" y="842" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#ef4444">Sandbox</text>
  <text x="876" y="842" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Docker exec/browse</text>

  <text x="825" y="860" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#14b8a6">Project</text>
  <text x="869" y="860" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Self-inspect/reload</text>

  <text x="825" y="878" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#4ade80">Built-in</text>
  <text x="872" y="878" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Memory save</text>

  <!-- Output formats -->
  <rect x="810" y="900" width="170" height="28" rx="4" fill="#1e293b" stroke="#475569" stroke-width="0.75"/>
  <text x="895" y="914" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#94a3b8">Output: text | json | structured</text>
  <text x="895" y="924" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Schema validation via Zod</text>

  <!-- ═══════════════════════════════════════════ -->
  <!-- INTEGRATION DETAILS (bottom left)           -->
  <!-- ═══════════════════════════════════════════ -->
  <rect x="20" y="820" width="570" height="120" rx="10" fill="#1c2333" stroke="#64748b" stroke-width="1" filter="url(#shadow)"/>
  <text x="305" y="840" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="11" font-weight="700" fill="#94a3b8">Key Architectural Principles</text>

  <text x="40" y="860" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#06b6d4">Lazy Initialization</text>
  <text x="160" y="860" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Knowledge stores, MCP servers, tools load on first access</text>

  <text x="40" y="878" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#4ade80">Declarative-First</text>
  <text x="148" y="878" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">YAML agents/workflows/knowledge — no code required to build AI systems</text>

  <text x="40" y="896" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#f59e0b">Factory Pattern</text>
  <text x="140" y="896" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">LLMFactory, KnowledgeStoreFactory, GraphRagFactory — cached instances</text>

  <text x="40" y="914" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#8b5cf6">Accessor Pattern</text>
  <text x="148" y="914" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Orchestrator exposes typed accessors for all components (agents, knowledge, etc.)</text>

  <text x="40" y="932" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#ef4444">Sandboxed Execution</text>
  <text x="167" y="932" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Agent code runs in Docker containers with resource limits &amp; network isolation</text>
</svg>