<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- SEO Meta Tags -->
  <title>Documentation - Agent Orcha | Multi-Agent AI Framework</title>
  <meta name="description" content="Complete documentation for Agent Orcha. Learn agents, workflows, knowledge stores, GraphRAG, LangGraph, MCP integration, and custom functions with YAML configuration.">
  <meta name="keywords" content="agent orcha documentation, multi-agent AI, YAML configuration, MCP tools, RAG, GraphRAG, knowledge stores, LangGraph">
  <meta name="author" content="Agent Orcha">

  <!-- Open Graph Tags -->
  <meta property="og:title" content="Documentation - Agent Orcha">
  <meta property="og:description" content="Complete documentation for building multi-agent AI systems with Agent Orcha.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://ddalcu.github.io/agent-orcha/documentation.html">

  <!-- Twitter Card Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Documentation - Agent Orcha">
  <meta name="twitter:description" content="Complete documentation for building multi-agent AI systems.">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lora:wght@600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">

  <!-- Highlight.js -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/tokyo-night-dark.min.css">

  <!-- Styles -->
  <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="nav">
    <div class="nav-container">
      <a href="index.html" class="nav-logo">
        <img src="assets/images/logo-only.png" alt="Agent Orcha Logo">
        <span>Agent Orcha</span>
      </a>
      <button class="nav-toggle" aria-label="Toggle navigation">☰</button>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="documentation.html">Documentation</a></li>
        <li><a href="hub.html">Hub</a></li>
        <li><a href="https://github.com/ddalcu/agent-orcha" target="_blank" rel="noopener"><i class="fa-brands fa-github"></i> GitHub</a></li>
        <li><a href="https://www.npmjs.com/package/agent-orcha" target="_blank" rel="noopener"><i class="fa-brands fa-npm"></i> NPM</a></li>
      </ul>
    </div>
  </nav>


  <!-- Documentation Content -->
  <section class="section">
    <div class="docs-layout">
      <!-- Left Sidebar Navigation -->
      <aside class="docs-sidebar">
        <nav class="docs-nav">
          <h4>Getting Started</h4>
          <ul>
            <li><a href="#quick-start">Quick Start Guide</a></li>
            <li><a href="#studio">Agent Orcha Studio</a></li>
            <li><a href="#cli-reference">CLI Commands</a></li>
            <li><a href="#docker">Docker Deployment</a></li>
          </ul>

          <h4>Core Concepts</h4>
          <ul>
            <li><a href="#core-concepts">Overview</a></li>
            <li><a href="#agents">Agents</a></li>
            <li><a href="#structured-output">Structured Output</a></li>
            <li><a href="#conversation-memory">Conversation Memory</a></li>
            <li><a href="#workflows">Workflows</a></li>
            <li><a href="#langgraph-workflows">LangGraph Workflows</a></li>
            <li><a href="#functions">Functions</a></li>
            <li><a href="#mcp-servers">MCP Servers</a></li>
            <li><a href="#skills">Skills</a></li>
          </ul>

          <h4>Knowledge Stores</h4>
          <ul>
            <li><a href="#knowledge-stores">Overview</a></li>
            <li><a href="#vector-stores">Vector Stores</a></li>
            <li><a href="#graphrag">GraphRAG</a></li>
            <li><a href="#extraction-modes">Extraction Modes</a></li>
            <li><a href="#direct-mapping">Direct Mapping</a></li>
            <li><a href="#source-types">Source Types</a></li>
            <li><a href="#graph-store-backends">Graph Store Backends</a></li>
            <li><a href="#search-configuration">Search Configuration</a></li>
            <li><a href="#knowledge-caching">Caching</a></li>
          </ul>

          <h4>API Reference</h4>
          <ul>
            <li><a href="#api-reference">Overview</a></li>
            <li>
              <ul>
                <li><a href="#agents-api">Agents API</a></li>
                <li><a href="#workflows-api">Workflows API</a></li>
                <li><a href="#knowledge-api">Knowledge API</a></li>
                <li><a href="#functions-api">Functions API</a></li>
                <li><a href="#skills-api">Skills API</a></li>
                <li><a href="#mcp-api">MCP API</a></li>
                <li><a href="#files-api">Files API</a></li>
                <li><a href="#llm-api">LLM API</a></li>
              </ul>
            </li>
          </ul>

          <h4>Examples</h4>
          <ul>
            <li><a href="#examples">Code Examples</a></li>
          </ul>
        </nav>
      </aside>

      <!-- Main Content -->
      <div class="docs-content">

        <!-- Quick Start Guide -->
        <h2 id="quick-start">Quick Start Guide</h2>
        <p>Get started with Agent Orcha in minutes. Follow these steps to set up your first multi-agent system.</p>

        <div class="expandable active">
          <div class="expandable-header">
            <h3>Step 1: Initialize Your Project</h3>
            <span class="expandable-icon">▼</span>
          </div>
          <div class="expandable-content">
            <div class="expandable-body">
              <p>Create a new Agent Orcha project with example configurations:</p>
              <div class="code-block">
                <div class="code-header">
                  <span class="code-language">Bash</span>
                  <button class="code-copy-btn" data-copy-target="init-cmd">Copy</button>
                </div>
                <div class="code-content">
                  <pre id="init-cmd"><code>npx agent-orcha init my-project
cd my-project</code></pre>
                </div>
              </div>
              <p>This creates a project directory with:</p>
              <ul>
                <li><code>agents/</code> - Example agent configurations</li>
                <li><code>workflows/</code> - Example workflow definitions</li>
                <li><code>functions/</code> - Custom JavaScript functions</li>
                <li><code>knowledge/</code> - Knowledge store configurations and data</li>
                <li><code>llm.json</code> - LLM provider settings</li>
                <li><code>mcp.json</code> - MCP server configuration</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="expandable">
          <div class="expandable-header">
            <h3>Step 2: Configure Your LLM</h3>
            <span class="expandable-icon">▼</span>
          </div>
          <div class="expandable-content">
            <div class="expandable-body">
              <p>Edit <code>llm.json</code> to configure your LLM providers. Agent Orcha supports OpenAI, Anthropic, Gemini, and local models.</p>
              <div class="code-block">
                <div class="code-header">
                  <span class="code-language">JSON</span>
                  <button class="code-copy-btn" data-copy-target="llm-config">Copy</button>
                </div>
                <div class="code-content">
                  <pre id="llm-config"><code>{
  "version": "1.0",
  "models": {
    "default": {
      "provider": "openai",
      "baseUrl": "http://localhost:1234/v1",
      "apiKey": "not-needed",
      "model": "your-model-name",
      "temperature": 0.7
    },
    "openai": {
      "apiKey": "sk-your-openai-key",
      "model": "gpt-4o",
      "temperature": 0.7
    }
  },
  "embeddings": {
    "default": {
      "provider": "openai",
      "baseUrl": "http://localhost:1234/v1",
      "apiKey": "not-needed",
      "model": "text-embedding-model"
    }
  }
}</code></pre>
                </div>
              </div>
              <p><strong>For local models:</strong></p>
              <ul>
                <li><strong>LM Studio:</strong> Use <code>baseUrl: "http://localhost:1234/v1"</code></li>
                <li><strong>Ollama:</strong> Use <code>baseUrl: "http://localhost:11434/v1"</code></li>
              </ul>
            </div>
          </div>
        </div>

        <div class="expandable">
          <div class="expandable-header">
            <h3>Step 3: Create Your First Agent</h3>
            <span class="expandable-icon">▼</span>
          </div>
          <div class="expandable-content">
            <div class="expandable-body">
              <p>Create a new file <code>agents/myagent.agent.yaml</code>:</p>
              <div class="code-block">
                <div class="code-header">
                  <span class="code-language">YAML</span>
                  <button class="code-copy-btn" data-copy-target="first-agent">Copy</button>
                </div>
                <div class="code-content">
                  <pre id="first-agent"><code>name: myagent
description: My first AI agent
version: "1.0.0"

llm:
  name: default
  temperature: 0.7

prompt:
  system: |
    You are a helpful assistant.
    Answer questions clearly and concisely.
  inputVariables:
    - query

output:
  format: text</code></pre>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="expandable">
          <div class="expandable-header">
            <h3>Step 4: Start the Server</h3>
            <span class="expandable-icon">▼</span>
          </div>
          <div class="expandable-content">
            <div class="expandable-body">
              <p>Launch the Agent Orcha server:</p>
              <div class="code-block">
                <div class="code-header">
                  <span class="code-language">Bash</span>
                  <button class="code-copy-btn" data-copy-target="start-cmd">Copy</button>
                </div>
                <div class="code-content">
                  <pre id="start-cmd"><code>npx agent-orcha start</code></pre>
                </div>
              </div>
              <p>The server and Studio dashboard will be available at <code>http://localhost:3000</code>.</p>
            </div>
          </div>
        </div>

        <div class="expandable">
          <div class="expandable-header">
            <h3>Step 5: Test Your Agent</h3>
            <span class="expandable-icon">▼</span>
          </div>
          <div class="expandable-content">
            <div class="expandable-body">
              <p>Invoke your agent via the REST API:</p>
              <div class="code-block">
                <div class="code-header">
                  <span class="code-language">Bash</span>
                  <button class="code-copy-btn" data-copy-target="test-agent">Copy</button>
                </div>
                <div class="code-content">
                  <pre id="test-agent"><code>curl -X POST http://localhost:3000/api/agents/myagent/invoke \
  -H "Content-Type: application/json" \
  -d '{"input": {"query": "Hello, how are you?"}}'</code></pre>
                </div>
              </div>
              <p>Expected response:</p>
              <div class="code-block">
                <div class="code-header">
                  <span class="code-language">JSON</span>
                </div>
                <div class="code-content">
                  <pre><code>{
  "output": "Hello! I'm doing well, thank you...",
  "metadata": {
    "tokensUsed": 42,
    "toolCalls": [],
    "duration": 823
  }
}</code></pre>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Agent Orcha Studio -->
        <h3 id="studio" class="mt-xl">Agent Orcha Studio</h3>
        <p>Agent Orcha includes a built-in web dashboard accessible at <code>http://localhost:3000</code> when the server is running. The Studio provides a visual interface for managing and testing your entire instance.</p>

        <h4>Studio Tabs</h4>
        <table>
          <thead>
            <tr>
              <th>Tab</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Agents</strong></td>
              <td>Browse all agents, invoke with custom input, stream responses, manage conversation sessions</td>
            </tr>
            <tr>
              <td><strong>Knowledge</strong></td>
              <td>Browse and search knowledge stores (vector + GraphRAG), view entities and communities for GraphRAG stores</td>
            </tr>
            <tr>
              <td><strong>MCP</strong></td>
              <td>Browse MCP servers, view available tools per server, call tools directly</td>
            </tr>
            <tr>
              <td><strong>Workflows</strong></td>
              <td>Browse and execute workflows (step-based and LangGraph), stream execution progress</td>
            </tr>
            <tr>
              <td><strong>IDE</strong></td>
              <td>Full in-browser file editor with file tree, syntax highlighting (YAML, JSON, JS), hot-reload on save</td>
            </tr>
          </tbody>
        </table>

        <!-- CLI Commands -->
        <h3 id="cli-reference" class="mt-xl">CLI Commands</h3>
        <p>Command-line interface for Agent Orcha operations.</p>

        <table>
          <thead>
            <tr>
              <th>Command</th>
              <th>Description</th>
              <th>Options</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>npx agent-orcha init [dir]</code></td>
              <td>Initialize a new project with example configs</td>
              <td><code>dir</code> - Target directory (default: current)</td>
            </tr>
            <tr>
              <td><code>npx agent-orcha start</code></td>
              <td>Start the agent orchestrator server</td>
              <td>Environment variables: <code>PORT</code>, <code>HOST</code>, <code>WORKSPACE</code></td>
            </tr>
            <tr>
              <td><code>npx agent-orcha help</code></td>
              <td>Show help information</td>
              <td>-</td>
            </tr>
          </tbody>
        </table>

        <!-- Docker Deployment -->
        <h3 id="docker" class="mt-xl">Docker Deployment</h3>
        <p>Agent Orcha provides a Docker image <code>ddalcu/agent-orcha</code> for containerized deployments. The image uses the Bun runtime and mounts your project directory to <code>/data</code>.</p>

        <h4>Initialize a Project via Docker</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">Bash</span>
            <button class="code-copy-btn" data-copy-target="docker-init">Copy</button>
          </div>
          <div class="code-content">
            <pre id="docker-init"><code>docker run -v ./my-agent-orcha-project:/data ddalcu/agent-orcha init</code></pre>
          </div>
        </div>

        <h4>Start the Server via Docker</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">Bash</span>
            <button class="code-copy-btn" data-copy-target="docker-start">Copy</button>
          </div>
          <div class="code-content">
            <pre id="docker-start"><code>docker run -p 3000:3000 -v ./my-agent-orcha-project:/data ddalcu/agent-orcha start</code></pre>
          </div>
        </div>

        <h4>Docker Compose</h4>
        <p>For a more manageable setup, use a <code>docker-compose.yaml</code> file:</p>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML</span>
            <button class="code-copy-btn" data-copy-target="docker-compose">Copy</button>
          </div>
          <div class="code-content">
            <pre id="docker-compose"><code>version: '3.8'

services:
  agent-orcha:
    image: ddalcu/agent-orcha
    ports:
      - "3000:3000"
    volumes:
      - ./my-agent-orcha-project:/data
    environment:
      - WORKSPACE=/data</code></pre>
          </div>
        </div>

        <h4>Environment Variables</h4>
        <table>
          <thead>
            <tr>
              <th>Variable</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>WORKSPACE</code></td>
              <td>Base directory for the project inside the container</td>
              <td><code>/data</code></td>
            </tr>
            <tr>
              <td><code>PORT</code></td>
              <td>Port for the server to listen on</td>
              <td><code>3000</code></td>
            </tr>
          </tbody>
        </table>

        <!-- Core Concepts -->
        <h2 id="core-concepts" class="mt-2xl">Core Concepts</h2>

        <h3 id="agents">Agents</h3>
        <p>Agents are AI-powered units that can use tools and respond to queries. Each agent is defined in a YAML file with its configuration.</p>

        <h4>Agent Schema</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML</span>
            <button class="code-copy-btn" data-copy-target="agent-schema">Copy</button>
          </div>
          <div class="code-content">
            <pre id="agent-schema"><code>name: string                    # Unique identifier (required)
description: string             # Human-readable description (required)
version: string                 # Semantic version (default: "1.0.0")

llm: string | object            # Reference to LLM config in llm.json
  # Simple: llm: default
  # With override: llm: { name: default, temperature: 0.3 }

prompt:                         # Prompt configuration (required)
  system: string                # System message/instructions
  inputVariables: [string]      # Variables to interpolate

tools:                          # Tools available to agent (optional)
  - mcp:&lt;server-name&gt;           # MCP server tools
  - knowledge:&lt;store-name&gt;      # Knowledge store search
  - function:&lt;function-name&gt;    # Custom functions
  - builtin:&lt;tool-name&gt;         # Built-in tools

output:                         # Output formatting (optional)
  format: text | json | structured
  schema:                       # Required when format is "structured"
    type: object
    properties: { ... }
    required: [string]

metadata:                       # Custom metadata (optional)
  category: string
  tags: [string]</code></pre>
          </div>
        </div>

        <h4>Example Agent with Tools</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML</span>
            <button class="code-copy-btn" data-copy-target="agent-example">Copy</button>
          </div>
          <div class="code-content">
            <pre id="agent-example"><code>name: researcher
description: Researches topics using knowledge search and web fetch
version: "1.0.0"

llm:
  name: default
  temperature: 0.5

prompt:
  system: |
    You are a thorough researcher. Use available tools
    to gather information before responding.
  inputVariables:
    - topic

tools:
  - mcp:fetch
  - knowledge:docs
  - function:fibonacci

output:
  format: text

metadata:
  category: research</code></pre>
          </div>
        </div>

        <h3 id="structured-output" class="mt-xl">Structured Output</h3>
        <p>Agents can return validated, structured JSON output by specifying an <code>output.schema</code>. This uses LangChain's <code>withStructuredOutput()</code> to ensure responses match your schema.</p>

        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML</span>
            <button class="code-copy-btn" data-copy-target="structured-output">Copy</button>
          </div>
          <div class="code-content">
            <pre id="structured-output"><code>name: sentiment-structured
description: Sentiment analysis with structured output

llm:
  name: default
  temperature: 0

prompt:
  system: |
    Analyze the sentiment of the provided text.
  inputVariables:
    - text

output:
  format: structured
  schema:
    type: object
    properties:
      sentiment:
        type: string
        enum: [positive, negative, neutral]
      confidence:
        type: number
        minimum: 0
        maximum: 1
      keywords:
        type: array
        items:
          type: string
    required:
      - sentiment
      - confidence</code></pre>
          </div>
        </div>

        <h3 id="conversation-memory" class="mt-xl">Conversation Memory</h3>
        <p>Agents support session-based conversation memory for multi-turn dialogues. Pass a <code>sessionId</code> in API calls to maintain context across interactions.</p>
        <ul>
          <li>In-memory session storage using LangChain messages</li>
          <li>Automatic FIFO message limit (default: 50 messages per session)</li>
          <li>Optional TTL-based session cleanup</li>
          <li>Session management API endpoints for stats and cleanup</li>
        </ul>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">Bash</span>
            <button class="code-copy-btn" data-copy-target="memory-example">Copy</button>
          </div>
          <div class="code-content">
            <pre id="memory-example"><code># First message with sessionId
curl -X POST http://localhost:3000/api/agents/chatbot/invoke \
  -H "Content-Type: application/json" \
  -d '{"input": {"message": "My name is Alice"}, "sessionId": "user-123"}'

# Second message - agent remembers context
curl -X POST http://localhost:3000/api/agents/chatbot/invoke \
  -H "Content-Type: application/json" \
  -d '{"input": {"message": "What is my name?"}, "sessionId": "user-123"}'</code></pre>
          </div>
        </div>

        <h3 id="workflows" class="mt-xl">Workflows</h3>
        <p>Workflows orchestrate multiple agents. Agent Orcha supports two workflow types: <strong>step-based</strong> (sequential/parallel with explicit steps) and <strong>LangGraph</strong> (autonomous, prompt-driven).</p>

        <h4>Step-Based Workflow Schema</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML</span>
            <button class="code-copy-btn" data-copy-target="workflow-schema">Copy</button>
          </div>
          <div class="code-content">
            <pre id="workflow-schema"><code>name: string                    # Unique identifier (required)
description: string             # Human-readable description (required)
version: string                 # Semantic version (default: "1.0.0")
type: steps                     # Optional (steps is default)

input:                          # Input schema (required)
  schema:
    &lt;field_name&gt;:
      type: string | number | boolean | array | object
      required: boolean
      default: any
      description: string

steps:                          # Workflow steps (required)
  - id: string                  # Unique step identifier
    agent: string               # Agent name to execute
    input:                      # Input mapping using templates
      &lt;key&gt;: "{{input.field}}"
      &lt;key&gt;: "{{steps.stepId.output}}"
    condition: string           # Optional conditional execution
    retry:                      # Optional retry configuration
      maxAttempts: number
      delay: number
    output:
      key: string

  # Parallel execution block
  - parallel:
      - id: step-a
        agent: agent-a
        input: { ... }

config:                         # Workflow configuration (optional)
  timeout: number               # Total timeout ms (default: 300000)
  onError: stop | continue | retry

output:                         # Output mapping (required)
  &lt;key&gt;: "{{steps.stepId.output}}"</code></pre>
          </div>
        </div>

        <h4>Template Syntax</h4>
        <p>Access data within workflows using double curly braces:</p>
        <table>
          <thead>
            <tr>
              <th>Template</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>{{input.fieldName}}</code></td>
              <td>Access workflow input field</td>
            </tr>
            <tr>
              <td><code>{{steps.stepId.output}}</code></td>
              <td>Access step output</td>
            </tr>
            <tr>
              <td><code>{{steps.stepId.output.nested.path}}</code></td>
              <td>Access nested output</td>
            </tr>
            <tr>
              <td><code>{{steps.stepId.metadata.duration}}</code></td>
              <td>Access step metadata</td>
            </tr>
          </tbody>
        </table>

        <h3 id="langgraph-workflows" class="mt-xl">LangGraph Workflows</h3>
        <p>LangGraph workflows use autonomous agents that discover and call tools/agents based on your prompt, without explicit step definitions.</p>

        <h4>LangGraph Schema</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML</span>
            <button class="code-copy-btn" data-copy-target="langgraph-schema">Copy</button>
          </div>
          <div class="code-content">
            <pre id="langgraph-schema"><code>name: string
type: langgraph                 # Required for LangGraph

input:
  schema:
    &lt;field&gt;:
      type: string
      required: true

prompt:
  system: string                # System instructions
  goal: string                  # Goal template (supports {{input.*}})

graph:
  model: string                 # LLM config name from llm.json
  executionMode: react | single-turn  # Default: react
  tools:
    mode: all | include | exclude | none
    sources: [mcp, knowledge, function, builtin]
    include: [string]           # For mode: include
    exclude: [string]           # For mode: exclude
  agents:
    mode: all | include | exclude | none
  maxIterations: number         # Default: 10
  timeout: number               # Default: 300000

output:
  &lt;key&gt;: "{{state.messages[-1].content}}"</code></pre>
          </div>
        </div>

        <h4>Execution Modes</h4>
        <table>
          <thead>
            <tr>
              <th>Mode</th>
              <th>Behavior</th>
              <th>Best For</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>single-turn</code></td>
              <td>Calls tools once, then returns</td>
              <td>Research, data gathering, straightforward tasks</td>
            </tr>
            <tr>
              <td><code>react</code></td>
              <td>Multiple rounds of tool calls with analysis</td>
              <td>Complex problems, iterative refinement</td>
            </tr>
          </tbody>
        </table>

        <h4>Human-in-the-Loop</h4>
        <p>LangGraph workflows support the <code>builtin:ask_user</code> tool. When called, the workflow pauses and waits for user input via <code>NodeInterrupt</code>.</p>

        <h3 id="functions" class="mt-xl">Functions</h3>
        <p>Functions are custom JavaScript tools that extend agent capabilities. They're simple to create and require no dependencies.</p>

        <h4>Function Schema</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">JavaScript</span>
            <button class="code-copy-btn" data-copy-target="function-schema">Copy</button>
          </div>
          <div class="code-content">
            <pre id="function-schema"><code>export default {
  name: 'function-name',
  description: 'What it does',

  parameters: {
    param1: {
      type: 'number',  // string | number | boolean | array | object | enum
      description: 'Parameter description',
      required: true,
      default: 0,
    },
  },

  execute: async ({ param1 }) => {
    // Your logic here
    return `Result: ${param1}`;
  },
};

export const metadata = {
  name: 'function-name',
  version: '1.0.0',
  author: 'Your Name',
  tags: ['category'],
};</code></pre>
          </div>
        </div>

        <h4>Example Function</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">JavaScript</span>
            <button class="code-copy-btn" data-copy-target="fibonacci-func">Copy</button>
          </div>
          <div class="code-content">
            <pre id="fibonacci-func"><code>export default {
  name: 'fibonacci',
  description: 'Returns the nth Fibonacci number (0-based indexing)',

  parameters: {
    n: {
      type: 'number',
      description: 'The index (0-based, max 100)',
    },
  },

  execute: async ({ n }) => {
    if (n &lt; 0 || !Number.isInteger(n)) {
      throw new Error('Index must be a non-negative integer');
    }
    if (n > 100) {
      throw new Error('Index too large (max 100)');
    }

    if (n === 0) return 'Fibonacci(0) = 0';
    if (n === 1) return 'Fibonacci(1) = 1';

    let prev = 0, curr = 1;
    for (let i = 2; i &lt;= n; i++) {
      [prev, curr] = [curr, prev + curr];
    }

    return `Fibonacci(${n}) = ${curr}`;
  },
};</code></pre>
          </div>
        </div>

        <h3 id="mcp-servers" class="mt-xl">MCP Servers</h3>
        <p>Model Context Protocol (MCP) servers provide external tools to agents. Configure them in <code>mcp.json</code>.</p>

        <h4>MCP Configuration</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">JSON</span>
            <button class="code-copy-btn" data-copy-target="mcp-config">Copy</button>
          </div>
          <div class="code-content">
            <pre id="mcp-config"><code>{
  "version": "1.0.0",
  "servers": {
    "fetch": {
      "transport": "streamable-http",
      "url": "https://remote.mcpservers.org/fetch/mcp",
      "description": "Web fetch capabilities",
      "timeout": 30000,
      "enabled": true
    },
    "filesystem": {
      "transport": "stdio",
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-filesystem", "/tmp"]
    }
  },
  "globalOptions": {
    "throwOnLoadError": false,
    "prefixToolNameWithServerName": true,
    "defaultToolTimeout": 30000
  }
}</code></pre>
          </div>
        </div>

        <!-- Skills -->
        <h3 id="skills" class="mt-xl">Skills</h3>
        <p>Skills are prompt augmentation units that expand what an agent knows how to do. Unlike tools or functions, skills are <strong>not executable code</strong> &mdash; they are knowledge and instruction bundles (Markdown files) that get injected into an agent's system prompt at runtime.</p>

        <h4>Directory Structure</h4>
        <p>Each skill lives in its own directory under <code>skills/</code>:</p>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">Bash</span>
          </div>
          <div class="code-content">
            <pre><code>skills/
  weather/
    SKILL.md
  spotify-player/
    SKILL.md
  my-custom-skill/
    SKILL.md</code></pre>
          </div>
        </div>

        <h4>SKILL.md Format</h4>
        <p>A SKILL.md file has optional YAML frontmatter followed by Markdown content:</p>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">Markdown</span>
          </div>
          <div class="code-content">
            <pre><code>---
name: weather
description: Fetch weather information using free APIs
---

# Weather Information

You can provide weather info using these services...

## Quick Weather (wttr.in)

```bash
curl -s "wttr.in/London?format=3"
```</code></pre>
          </div>
        </div>

        <p>The frontmatter fields:</p>
        <ul>
          <li><strong>name</strong> &mdash; Unique skill identifier. If omitted, the directory name is used.</li>
          <li><strong>description</strong> &mdash; Human-readable description shown in the UI and API.</li>
        </ul>

        <h4>Agent Configuration</h4>
        <p>Attach skills to agents in their YAML definition file:</p>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML</span>
          </div>
          <div class="code-content">
            <pre><code># Specific skills by name
name: my-agent
description: An agent with weather skills
llm: default
prompt:
  system: You are a helpful assistant.
  inputVariables:
    - query
skills:
  - weather
  - spotify-player

# Or attach all available skills
skills:
  mode: all</code></pre>
          </div>
        </div>

        <h4>How It Works</h4>
        <p>When an agent with skills is invoked, the skill content is appended to the agent's system prompt before the LLM call. Each skill is wrapped in <code>&lt;skill name="..."&gt;</code> delimiters so the LLM can distinguish between different skill instructions.</p>

        <h4>Creating Custom Skills</h4>
        <ol>
          <li>Create a directory under <code>skills/</code> with your skill name.</li>
          <li>Add a <code>SKILL.md</code> file with frontmatter and instructions.</li>
          <li>Reference the skill name in your agent's <code>skills</code> array.</li>
          <li>Restart the server or use hot-reload to pick up changes.</li>
        </ol>

        <h4>Community Skills Registry</h4>
        <p>Community-contributed skills that you can copy into your project:</p>
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Description</th>
              <th>Author</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>skill-creator</strong></td>
              <td>Guides the creation of new SKILL.md files</td>
              <td>Agent Orcha</td>
            </tr>
            <tr>
              <td><strong>weather</strong></td>
              <td>Weather info via wttr.in and Open-Meteo</td>
              <td>Agent Orcha</td>
            </tr>
            <tr>
              <td><strong>spotify-player</strong></td>
              <td>Spotify playback control via spogo CLI</td>
              <td>Agent Orcha</td>
            </tr>
            <tr>
              <td><strong>wacli</strong></td>
              <td>WhatsApp messaging via wacli CLI</td>
              <td>Agent Orcha</td>
            </tr>
          </tbody>
        </table>
        <p>Want to contribute a skill? Add it to <code>templates/skills/</code> and submit a pull request to the repository.</p>

        <!-- Knowledge Stores -->
        <h2 id="knowledge-stores" class="mt-2xl">Knowledge Stores</h2>
        <p>Knowledge stores enable semantic search and RAG (Retrieval-Augmented Generation) capabilities. Define them in YAML files within the <code>knowledge/</code> directory. Agent Orcha supports two kinds: <strong>vector</strong> (default) for traditional similarity search, and <strong>graph-rag</strong> for entity-level knowledge graphs with community detection.</p>

        <h3 id="vector-stores">Vector Knowledge Stores</h3>
        <p>Vector stores chunk your documents, embed them, and store the vectors for similarity search. This is the default <code>kind</code> and works well for most RAG use cases.</p>

        <h4>Vector Knowledge Schema</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML</span>
            <button class="code-copy-btn" data-copy-target="knowledge-schema">Copy</button>
          </div>
          <div class="code-content">
            <pre id="knowledge-schema"><code>name: string                    # Unique identifier (required)
description: string             # Human-readable description (required)
kind: vector                    # Optional (vector is default)

source:                         # Data source (required)
  type: directory | file | database | web | s3

loader:                         # Document loader (required)
  type: text | pdf | csv | json | markdown

splitter:                       # Text chunking (required)
  type: character | recursive | token | markdown
  chunkSize: number             # Characters per chunk (default: 1000)
  chunkOverlap: number          # Overlap between chunks (default: 200)

embedding: string               # Reference to embedding config in llm.json (default: "default")

store:                          # Vector store backend
  type: memory | chroma | pinecone | qdrant
  options:
    path: string                # Storage path (for chroma)
    collectionName: string      # Collection name
    url: string                 # Server URL (for chroma, qdrant)

search:                         # Search configuration (optional)
  defaultK: number              # Results per search (default: 4)
  scoreThreshold: number        # Minimum similarity score (0-1)</code></pre>
          </div>
        </div>

        <h3 id="graphrag" class="mt-xl">GraphRAG Knowledge Stores</h3>
        <p>GraphRAG stores go beyond vector search by extracting entities and relationships from your documents, building a knowledge graph, detecting communities via the Louvain algorithm, and summarizing those communities with an LLM. This enables both <strong>local search</strong> (entity-level, neighborhood traversal) and <strong>global search</strong> (thematic, community-level summaries).</p>

        <h4>GraphRAG Schema</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML</span>
            <button class="code-copy-btn" data-copy-target="graphrag-schema">Copy</button>
          </div>
          <div class="code-content">
            <pre id="graphrag-schema"><code>name: string
kind: graph-rag                 # Required for GraphRAG
description: string

source:                         # Same source types as vector
  type: directory | file | database | web | s3

loader:
  type: text | pdf | csv | json | markdown

splitter:
  type: character | recursive | token | markdown
  chunkSize: number
  chunkOverlap: number

embedding: string

graph:
  extractionMode: llm | direct  # How entities are extracted (default: "llm")

  extraction:                   # LLM extraction settings (used when extractionMode: llm)
    llm: string                 # LLM config from llm.json (default: "default")
    entityTypes:                # Optional - omit for auto-extraction
      - name: string
        description: string
    relationshipTypes:          # Optional
      - name: string
        description: string

  directMapping:                # Direct mapping settings (used when extractionMode: direct)
    entities:
      - type: string            # Entity type name
        idColumn: string        # Column used as unique ID
        nameColumn: string      # Column used as display name
        properties: [string]    # Columns to include as properties
    relationships:
      - type: string            # Relationship type name
        source: string          # Source entity type
        target: string          # Target entity type
        sourceIdColumn: string  # Column linking to source entity
        targetIdColumn: string  # Column linking to target entity

  communities:                  # Community detection
    algorithm: louvain
    resolution: number          # Default: 1.0
    minSize: number             # Default: 2
    summaryLlm: string          # Default: "default"

  store:
    type: memory | neo4j        # Default: memory
    options:                    # Required for neo4j
      uri: string               # e.g. bolt://localhost:7687
      username: string
      password: string
      database: string          # Optional

  cache:
    enabled: boolean            # Default: true
    directory: string           # Default: ".graph-cache"

search:
  defaultK: number              # Default: 10
  localSearch:
    maxDepth: number            # Graph traversal depth (default: 2)
  globalSearch:
    topCommunities: number      # Communities to consider (default: 5)
    llm: string                 # LLM for synthesis (default: "default")</code></pre>
          </div>
        </div>

        <h3 id="extraction-modes" class="mt-xl">Extraction Modes</h3>
        <p>GraphRAG supports two extraction modes that determine how entities and relationships are discovered from your source data. Set this via <code>graph.extractionMode</code> in your knowledge YAML.</p>

        <h4>LLM Extraction (<code>extractionMode: llm</code>)</h4>
        <p>Each document chunk is sent to an LLM with a prompt asking it to identify entities, their types, descriptions, and relationships. The LLM interprets unstructured content and infers the graph structure. You can optionally constrain extraction by specifying <code>entityTypes</code> and <code>relationshipTypes</code>, or omit them to let the LLM discover entities freely.</p>

        <h4>Direct Mapping (<code>extractionMode: direct</code>)</h4>
        <p>Entities and relationships are mapped deterministically from structured data columns using the <code>directMapping</code> configuration. Each row produces entities based on column values, and relationships are created from foreign key references. No LLM calls are made during extraction (embedding still uses the configured embedding model).</p>

        <h4>Comparison</h4>
        <table>
          <thead>
            <tr>
              <th></th>
              <th><code>llm</code></th>
              <th><code>direct</code></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Best for</strong></td>
              <td>Unstructured text (articles, docs, HTML, transcripts)</td>
              <td>Structured data (database queries with clear columns)</td>
            </tr>
            <tr>
              <td><strong>Entities</strong></td>
              <td>Inferred by LLM from content</td>
              <td>Mapped 1:1 from columns you define</td>
            </tr>
            <tr>
              <td><strong>Relationships</strong></td>
              <td>Inferred by LLM</td>
              <td>Defined explicitly in config</td>
            </tr>
            <tr>
              <td><strong>LLM cost</strong></td>
              <td>API calls per chunk (can be significant for large datasets)</td>
              <td>Zero LLM calls for extraction</td>
            </tr>
            <tr>
              <td><strong>Determinism</strong></td>
              <td>Non-deterministic (results vary per run)</td>
              <td>Deterministic (same input = same graph)</td>
            </tr>
            <tr>
              <td><strong>Data preservation</strong></td>
              <td>LLM may miss or hallucinate entities</td>
              <td>100% data preservation from source columns</td>
            </tr>
            <tr>
              <td><strong>Setup effort</strong></td>
              <td>Minimal (just configure LLM)</td>
              <td>Requires defining entity/relationship mappings</td>
            </tr>
          </tbody>
        </table>

        <p><strong>Tip:</strong> You can define both <code>extraction</code> and <code>directMapping</code> in the same config and switch between them by changing <code>extractionMode</code>. This is useful for experimenting with both approaches on the same data.</p>

        <h3 id="direct-mapping" class="mt-xl">Direct Mapping Configuration</h3>
        <p>Direct mapping is designed for database sources where entities and relationships are already implicit in the schema. Instead of asking an LLM to interpret text, you define exactly which columns map to which entity types.</p>

        <h4>Example: Blog Posts with Authors</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML</span>
            <button class="code-copy-btn" data-copy-target="direct-mapping-example">Copy</button>
          </div>
          <div class="code-content">
            <pre id="direct-mapping-example"><code>name: blog-posts
kind: graph-rag
description: Blog posts with authors

source:
  type: database
  connectionString: postgresql://user:pass@localhost:5432/blog
  query: |
    SELECT p.id, p.title, p.slug, p.html AS content,
           u.name AS author_name, u.email AS author_email
    FROM posts p
    LEFT JOIN users u ON p.author_id = u.id
    WHERE p.status = 'published'
  contentColumn: content
  metadataColumns: [id, title, slug, author_name, author_email]

loader:
  type: text

splitter:
  type: recursive
  chunkSize: 2000
  chunkOverlap: 300

embedding: default

graph:
  extractionMode: direct

  directMapping:
    entities:
      - type: Post
        idColumn: id
        nameColumn: title
        properties: [title, slug, content]

      - type: Author
        idColumn: author_email
        nameColumn: author_name
        properties: [author_name, author_email]

    relationships:
      - type: WROTE
        source: Author
        target: Post
        sourceIdColumn: author_email
        targetIdColumn: id

  store:
    type: neo4j
    options:
      uri: bolt://localhost:7687
      username: neo4j
      password: your-password

search:
  defaultK: 10</code></pre>
          </div>
        </div>

        <p>Each entity definition maps a row's columns to a graph node. The <code>idColumn</code> determines uniqueness (duplicate IDs are merged), <code>nameColumn</code> sets the display name, and <code>properties</code> lists which columns to attach as node properties. Relationships connect entities via their ID columns.</p>

        <h3 id="source-types" class="mt-xl">Source Types</h3>
        <p>Both vector and GraphRAG knowledge stores support the same source types for loading documents.</p>

        <table>
          <thead>
            <tr>
              <th>Type</th>
              <th>Description</th>
              <th>Key Options</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>directory</code></td>
              <td>Load files from a local directory</td>
              <td><code>path</code>, <code>pattern</code> (glob), <code>recursive</code></td>
            </tr>
            <tr>
              <td><code>file</code></td>
              <td>Load a single file</td>
              <td><code>path</code></td>
            </tr>
            <tr>
              <td><code>database</code></td>
              <td>Query PostgreSQL or MySQL</td>
              <td><code>connectionString</code>, <code>query</code>, <code>contentColumn</code>, <code>metadataColumns</code>, <code>batchSize</code></td>
            </tr>
            <tr>
              <td><code>web</code></td>
              <td>Scrape a web page</td>
              <td><code>url</code>, <code>selector</code> (CSS), <code>headers</code></td>
            </tr>
            <tr>
              <td><code>s3</code></td>
              <td>Load from S3 or S3-compatible storage (MinIO, Wasabi)</td>
              <td><code>bucket</code>, <code>prefix</code>, <code>endpoint</code>, <code>region</code>, <code>pattern</code>, <code>forcePathStyle</code></td>
            </tr>
          </tbody>
        </table>

        <p>Paths for <code>directory</code> and <code>file</code> sources are relative to the project root. Database connection strings and S3 credentials can also be provided via environment variables.</p>

        <h3 id="graph-store-backends" class="mt-xl">Graph Store Backends</h3>
        <p>GraphRAG stores support two backend types for persisting the knowledge graph.</p>

        <table>
          <thead>
            <tr>
              <th>Type</th>
              <th>Persistence</th>
              <th>Community Detection</th>
              <th>Best For</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>memory</code></td>
              <td>In-process only (rebuilt from cache on restart)</td>
              <td>Supported (Louvain algorithm)</td>
              <td>Development, small datasets, quick iteration</td>
            </tr>
            <tr>
              <td><code>neo4j</code></td>
              <td>Persistent across restarts</td>
              <td>Not yet supported (communities loaded from cache)</td>
              <td>Production, large graphs, external graph queries</td>
            </tr>
          </tbody>
        </table>

        <h4>Neo4j Configuration</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML</span>
            <button class="code-copy-btn" data-copy-target="neo4j-config">Copy</button>
          </div>
          <div class="code-content">
            <pre id="neo4j-config"><code>graph:
  store:
    type: neo4j
    options:
      uri: bolt://localhost:7687
      username: neo4j
      password: your-password
      database: neo4j             # Optional, defaults to "neo4j"</code></pre>
          </div>
        </div>

        <p>When using Neo4j, the graph persists across server restarts. On startup, the factory detects existing nodes and skips the extraction pipeline. To force a full re-extraction (e.g., after changing <code>extractionMode</code>), use the Re-index button in the Studio or call <code>POST /api/knowledge/:name/index</code>.</p>

        <h3 id="search-configuration" class="mt-xl">Search Configuration</h3>
        <p>Search behavior differs between vector and GraphRAG stores.</p>

        <h4>Vector Search</h4>
        <p>Vector stores use cosine similarity to find the most relevant chunks. Configure via the <code>search</code> block:</p>
        <ul>
          <li><code>defaultK</code> &mdash; Number of results returned per search (default: 4)</li>
          <li><code>scoreThreshold</code> &mdash; Minimum similarity score to include a result (0-1, optional)</li>
        </ul>

        <h4>GraphRAG Search</h4>
        <p>GraphRAG stores automatically detect whether a query needs <strong>local</strong> or <strong>global</strong> search:</p>
        <ul>
          <li><strong>Local search</strong> &mdash; For specific entity queries (e.g., "What did Alice write?"). Finds the closest entities by embedding similarity, then traverses the graph neighborhood up to <code>maxDepth</code> hops.</li>
          <li><strong>Global search</strong> &mdash; For broad thematic queries (e.g., "What are the main topics?"). Uses community summaries to provide high-level answers synthesized by an LLM.</li>
        </ul>

        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML</span>
            <button class="code-copy-btn" data-copy-target="search-config">Copy</button>
          </div>
          <div class="code-content">
            <pre id="search-config"><code>search:
  defaultK: 10                  # Results per search
  localSearch:
    maxDepth: 2                 # Graph traversal hops (default: 2)
  globalSearch:
    topCommunities: 5           # Communities to consider (default: 5)
    llm: default                # LLM for synthesizing community answers</code></pre>
          </div>
        </div>

        <h3 id="knowledge-caching" class="mt-xl">Caching</h3>
        <p>Both vector and GraphRAG stores support caching to avoid reprocessing on server restart.</p>

        <h4>Vector Store Cache</h4>
        <p>Memory-based vector stores automatically cache their embeddings to disk. On restart, the cache is validated against source file hashes &mdash; if sources haven't changed, vectors are restored from cache without re-embedding.</p>

        <h4>GraphRAG Cache</h4>
        <p>GraphRAG stores cache extracted entities, relationships, communities, and node embeddings. The cache is validated using a hash of the document contents. Configure caching in the <code>graph.cache</code> block:</p>

        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML</span>
            <button class="code-copy-btn" data-copy-target="cache-config">Copy</button>
          </div>
          <div class="code-content">
            <pre id="cache-config"><code>graph:
  cache:
    enabled: true               # Default: true
    directory: .graph-cache     # Relative to project root (default: ".graph-cache")</code></pre>
          </div>
        </div>

        <p>The cache is automatically invalidated when source content changes. To force a full rebuild, use the Re-index button or delete the cache directory.</p>

        <p><strong>Startup behavior with caching:</strong></p>
        <ol>
          <li><strong>Persistent store has data</strong> (Neo4j) &mdash; Graph is used as-is, extraction is skipped entirely</li>
          <li><strong>Cache exists with node embeddings</strong> (memory stores) &mdash; Graph is rebuilt from cache without loading documents or running extraction</li>
          <li><strong>Cache exists but source hash changed</strong> &mdash; Full pipeline runs (load, split, extract, embed, build, cache)</li>
          <li><strong>No cache</strong> &mdash; Full pipeline runs from scratch</li>
        </ol>

        <!-- API Reference -->
        <h2 id="api-reference" class="mt-2xl">API Reference</h2>
        <p>Complete REST API documentation for interacting with agents, workflows, knowledge stores, functions, MCP servers, files, and LLMs.</p>

        <h3>Health Check</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">HTTP</span>
          </div>
          <div class="code-content">
            <pre><code>GET /health

Response:
{
  "status": "ok",
  "timestamp": "2026-01-21T12:00:00.000Z"
}</code></pre>
          </div>
        </div>

        <h3 id="agents-api">Agents API</h3>
        <table>
          <thead>
            <tr>
              <th>Method</th>
              <th>Endpoint</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>GET</td>
              <td><code>/api/agents</code></td>
              <td>List all agents</td>
            </tr>
            <tr>
              <td>GET</td>
              <td><code>/api/agents/:name</code></td>
              <td>Get agent details</td>
            </tr>
            <tr>
              <td>POST</td>
              <td><code>/api/agents/:name/invoke</code></td>
              <td>Run agent</td>
            </tr>
            <tr>
              <td>POST</td>
              <td><code>/api/agents/:name/stream</code></td>
              <td>Stream agent response (SSE)</td>
            </tr>
            <tr>
              <td>GET</td>
              <td><code>/api/agents/sessions/stats</code></td>
              <td>Get session statistics</td>
            </tr>
            <tr>
              <td>GET</td>
              <td><code>/api/agents/sessions/:sessionId</code></td>
              <td>Get session details</td>
            </tr>
            <tr>
              <td>DELETE</td>
              <td><code>/api/agents/sessions/:sessionId</code></td>
              <td>Clear session messages</td>
            </tr>
          </tbody>
        </table>

        <h4>Invoke Agent</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">Bash</span>
            <button class="code-copy-btn" data-copy-target="agent-invoke">Copy</button>
          </div>
          <div class="code-content">
            <pre id="agent-invoke"><code>curl -X POST http://localhost:3000/api/agents/researcher/invoke \
  -H "Content-Type: application/json" \
  -d '{
    "input": {
      "topic": "your topic"
    },
    "sessionId": "optional-session-id"
  }'</code></pre>
          </div>
        </div>

        <h4>Response</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">JSON</span>
          </div>
          <div class="code-content">
            <pre><code>{
  "output": "Agent response text",
  "metadata": {
    "tokensUsed": 150,
    "toolCalls": [],
    "duration": 1234,
    "sessionId": "optional-session-id",
    "messagesInSession": 4,
    "structuredOutputValid": true
  }
}</code></pre>
          </div>
        </div>

        <h3 id="workflows-api" class="mt-xl">Workflows API</h3>
        <table>
          <thead>
            <tr>
              <th>Method</th>
              <th>Endpoint</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>GET</td>
              <td><code>/api/workflows</code></td>
              <td>List all workflows</td>
            </tr>
            <tr>
              <td>GET</td>
              <td><code>/api/workflows/:name</code></td>
              <td>Get workflow details</td>
            </tr>
            <tr>
              <td>POST</td>
              <td><code>/api/workflows/:name/run</code></td>
              <td>Execute workflow</td>
            </tr>
            <tr>
              <td>POST</td>
              <td><code>/api/workflows/:name/stream</code></td>
              <td>Stream workflow execution (SSE)</td>
            </tr>
          </tbody>
        </table>

        <h4>Run Workflow</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">Bash</span>
            <button class="code-copy-btn" data-copy-target="workflow-run">Copy</button>
          </div>
          <div class="code-content">
            <pre id="workflow-run"><code>curl -X POST http://localhost:3000/api/workflows/research-paper/run \
  -H "Content-Type: application/json" \
  -d '{
    "input": {
      "topic": "research topic",
      "style": "professional"
    }
  }'</code></pre>
          </div>
        </div>

        <h3 id="knowledge-api" class="mt-xl">Knowledge API</h3>
        <table>
          <thead>
            <tr>
              <th>Method</th>
              <th>Endpoint</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>GET</td>
              <td><code>/api/knowledge</code></td>
              <td>List all knowledge stores</td>
            </tr>
            <tr>
              <td>GET</td>
              <td><code>/api/knowledge/:name</code></td>
              <td>Get knowledge store config</td>
            </tr>
            <tr>
              <td>POST</td>
              <td><code>/api/knowledge/:name/search</code></td>
              <td>Search knowledge store</td>
            </tr>
            <tr>
              <td>POST</td>
              <td><code>/api/knowledge/:name/refresh</code></td>
              <td>Reload documents</td>
            </tr>
            <tr>
              <td>POST</td>
              <td><code>/api/knowledge/:name/add</code></td>
              <td>Add documents</td>
            </tr>
            <tr>
              <td>GET</td>
              <td><code>/api/knowledge/:name/entities</code></td>
              <td>Get GraphRAG entities</td>
            </tr>
            <tr>
              <td>GET</td>
              <td><code>/api/knowledge/:name/communities</code></td>
              <td>Get GraphRAG communities</td>
            </tr>
            <tr>
              <td>GET</td>
              <td><code>/api/knowledge/:name/edges</code></td>
              <td>Get GraphRAG edges</td>
            </tr>
          </tbody>
        </table>

        <h4>Search Knowledge Store</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">Bash</span>
            <button class="code-copy-btn" data-copy-target="knowledge-search">Copy</button>
          </div>
          <div class="code-content">
            <pre id="knowledge-search"><code>curl -X POST http://localhost:3000/api/knowledge/docs/search \
  -H "Content-Type: application/json" \
  -d '{
    "query": "search term",
    "k": 4
  }'</code></pre>
          </div>
        </div>

        <h4>Add Documents to Knowledge Store</h4>
        <p>Dynamically add documents to a knowledge store without restarting the server. If the store isn't initialized, it will be created automatically.</p>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">Bash</span>
            <button class="code-copy-btn" data-copy-target="knowledge-add">Copy</button>
          </div>
          <div class="code-content">
            <pre id="knowledge-add"><code>curl -X POST http://localhost:3000/api/knowledge/docs/add \
  -H "Content-Type: application/json" \
  -d '{
    "documents": [
      {
        "content": "Your document content here",
        "metadata": {
          "source": "api",
          "category": "example",
          "timestamp": "2026-01-29"
        }
      }
    ]
  }'</code></pre>
          </div>
        </div>
        <p>Response:</p>
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">JSON</span>
          </div>
          <div class="code-content">
            <pre><code>{
  "success": true,
  "added": 1
}</code></pre>
          </div>
        </div>
        <p><strong>Use cases:</strong></p>
        <ul>
          <li>Building knowledge stores incrementally from external sources</li>
          <li>Real-time ingestion of generated content</li>
          <li>Integrating with webhooks or external APIs</li>
          <li>Dynamic document addition without server restarts</li>
        </ul>

        <h3 id="functions-api" class="mt-xl">Functions API</h3>
        <table>
          <thead>
            <tr>
              <th>Method</th>
              <th>Endpoint</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>GET</td>
              <td><code>/api/functions</code></td>
              <td>List all functions</td>
            </tr>
            <tr>
              <td>GET</td>
              <td><code>/api/functions/:name</code></td>
              <td>Get function details and schema</td>
            </tr>
            <tr>
              <td>POST</td>
              <td><code>/api/functions/:name/call</code></td>
              <td>Call a function</td>
            </tr>
          </tbody>
        </table>

        <h3 id="skills-api" class="mt-xl">Skills API</h3>
        <table>
          <thead>
            <tr>
              <th>Method</th>
              <th>Endpoint</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>GET</td>
              <td><code>/api/skills</code></td>
              <td>List all skills (name, description)</td>
            </tr>
            <tr>
              <td>GET</td>
              <td><code>/api/skills/:name</code></td>
              <td>Get skill details (name, description, content)</td>
            </tr>
          </tbody>
        </table>

        <h3 id="mcp-api" class="mt-xl">MCP API</h3>
        <table>
          <thead>
            <tr>
              <th>Method</th>
              <th>Endpoint</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>GET</td>
              <td><code>/api/mcp</code></td>
              <td>List all MCP servers</td>
            </tr>
            <tr>
              <td>GET</td>
              <td><code>/api/mcp/:name</code></td>
              <td>Get MCP server config</td>
            </tr>
            <tr>
              <td>GET</td>
              <td><code>/api/mcp/:name/tools</code></td>
              <td>List tools from server</td>
            </tr>
            <tr>
              <td>POST</td>
              <td><code>/api/mcp/:name/call</code></td>
              <td>Call a tool on server</td>
            </tr>
          </tbody>
        </table>

        <h3 id="files-api" class="mt-xl">Files API</h3>
        <table>
          <thead>
            <tr>
              <th>Method</th>
              <th>Endpoint</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>GET</td>
              <td><code>/api/files/tree</code></td>
              <td>Get project directory tree</td>
            </tr>
            <tr>
              <td>GET</td>
              <td><code>/api/files/read?path=...</code></td>
              <td>Read file contents</td>
            </tr>
            <tr>
              <td>PUT</td>
              <td><code>/api/files/write</code></td>
              <td>Write file contents (hot-reload)</td>
            </tr>
          </tbody>
        </table>

        <h3 id="llm-api" class="mt-xl">LLM API</h3>
        <table>
          <thead>
            <tr>
              <th>Method</th>
              <th>Endpoint</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>GET</td>
              <td><code>/api/llm</code></td>
              <td>List all LLM configurations</td>
            </tr>
            <tr>
              <td>GET</td>
              <td><code>/api/llm/:name</code></td>
              <td>Get LLM config details</td>
            </tr>
            <tr>
              <td>POST</td>
              <td><code>/api/llm/:name/chat</code></td>
              <td>Chat with LLM</td>
            </tr>
            <tr>
              <td>POST</td>
              <td><code>/api/llm/:name/stream</code></td>
              <td>Stream chat with LLM (SSE)</td>
            </tr>
          </tbody>
        </table>

        <!-- Examples -->
        <h2 id="examples" class="mt-2xl">Examples</h2>
        <p>Real-world examples to help you get started with common use cases.</p>

        <h3>Example 1: Math Agent with Custom Function</h3>
        <p>This example shows an agent using a custom Fibonacci calculator function.</p>

        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML - agents/math.agent.yaml</span>
            <button class="code-copy-btn" data-copy-target="math-agent">Copy</button>
          </div>
          <div class="code-content">
            <pre id="math-agent"><code>name: math
description: An agent that can calculate Fibonacci numbers
version: "1.0.0"

llm:
  name: default
  temperature: 0.3

prompt:
  system: |
    You are a mathematical assistant.
    Use the fibonacci function to calculate results.
  inputVariables:
    - query

tools:
  - function:fibonacci

output:
  format: text</code></pre>
          </div>
        </div>

        <h3 class="mt-xl">Example 2: Multi-Step Workflow</h3>
        <p>Orchestrating multiple agents to complete a complex task.</p>

        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML - workflows/example.workflow.yaml</span>
            <button class="code-copy-btn" data-copy-target="example-workflow">Copy</button>
          </div>
          <div class="code-content">
            <pre id="example-workflow"><code>name: example-workflow
description: A workflow demonstrating multi-agent orchestration
version: "1.0.0"

input:
  schema:
    topic:
      type: string
      required: true
      description: The topic to process

steps:
  - id: get-time
    agent: time
    input:
      timezone: "America/New_York"
    output:
      key: current_time

  - id: search-knowledge
    agent: knowledge
    input:
      query: "{{input.topic}}"
    output:
      key: knowledge_result

  - id: summarize
    agent: example
    input:
      query: |
        Summarize: {{steps.get-time.output}}
        Topic: {{input.topic}}
        Knowledge: {{steps.search-knowledge.output}}
    output:
      key: final_summary

config:
  timeout: 300000
  onError: stop

output:
  timestamp: "{{steps.get-time.output}}"
  knowledge: "{{steps.search-knowledge.output}}"
  summary: "{{steps.summarize.output}}"</code></pre>
          </div>
        </div>

        <h3 class="mt-xl">Example 3: Knowledge Store for RAG</h3>
        <p>Setting up semantic search with a knowledge store.</p>

        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML - knowledge/docs.knowledge.yaml</span>
            <button class="code-copy-btn" data-copy-target="knowledge-example">Copy</button>
          </div>
          <div class="code-content">
            <pre id="knowledge-example"><code>name: docs
description: Knowledge base for semantic search

source:
  type: directory
  path: knowledge/sample-data
  pattern: "*.txt"

loader:
  type: text

splitter:
  type: character
  chunkSize: 1000
  chunkOverlap: 200

embedding: default

store:
  type: memory

search:
  defaultK: 4
  scoreThreshold: 0.2</code></pre>
          </div>
        </div>

        <h3 class="mt-xl">Example 4: LangGraph Workflow</h3>
        <p>An autonomous workflow using LangGraph with automatic tool and agent discovery.</p>

        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML - workflows/research.workflow.yaml</span>
            <button class="code-copy-btn" data-copy-target="langgraph-example">Copy</button>
          </div>
          <div class="code-content">
            <pre id="langgraph-example"><code>name: langgraph-research
description: Autonomous research using tool discovery
version: "1.0.0"
type: langgraph

input:
  schema:
    topic:
      type: string
      required: true

prompt:
  system: |
    You are a research assistant with access to tools and agents.
    Identify all tools you need, call them in parallel,
    then synthesize results into a comprehensive report.
  goal: "Research and analyze: {{input.topic}}"

graph:
  model: default
  executionMode: single-turn
  tools:
    mode: all
    sources: [mcp, knowledge, function, builtin]
  agents:
    mode: all
  maxIterations: 10
  timeout: 300000

output:
  analysis: "{{state.messages[-1].content}}"</code></pre>
          </div>
        </div>

        <h3 class="mt-xl">Example 5: GraphRAG Knowledge Store</h3>
        <p>Building a knowledge graph from call center transcripts for entity-level and thematic analysis.</p>

        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML - knowledge/call-center.knowledge.yaml</span>
            <button class="code-copy-btn" data-copy-target="graphrag-example">Copy</button>
          </div>
          <div class="code-content">
            <pre id="graphrag-example"><code>name: call-center-analysis
kind: graph-rag
description: GraphRAG for call center transcripts

source:
  type: directory
  path: knowledge/transcripts
  pattern: "*.txt"

loader:
  type: text

splitter:
  type: recursive
  chunkSize: 2000
  chunkOverlap: 200

embedding: default

graph:
  extraction:
    llm: default
    entityTypes:
      - name: Agent
        description: "Call center representative"
      - name: Customer
        description: "Person calling"
      - name: Vehicle
        description: "Car discussed"
    relationshipTypes:
      - name: HANDLED_BY
        description: "Call handled by agent"
      - name: INTERESTED_IN
        description: "Customer interest"

  communities:
    algorithm: louvain
    resolution: 1.0
    minSize: 2
    summaryLlm: default

  store:
    type: memory

  cache:
    enabled: true
    directory: .graph-cache

search:
  defaultK: 10
  localSearch:
    maxDepth: 2
  globalSearch:
    topCommunities: 5
    llm: default</code></pre>
          </div>
        </div>

        <h3 class="mt-xl">Example 6: Agent with Structured Output</h3>
        <p>An agent that returns validated JSON matching a schema.</p>

        <div class="code-block">
          <div class="code-header">
            <span class="code-language">YAML - agents/sentiment.agent.yaml</span>
            <button class="code-copy-btn" data-copy-target="structured-example">Copy</button>
          </div>
          <div class="code-content">
            <pre id="structured-example"><code>name: sentiment-structured
description: Sentiment analysis with structured output
version: "1.0.0"

llm:
  name: default
  temperature: 0

prompt:
  system: |
    Analyze the sentiment of the provided text.
  inputVariables:
    - text

output:
  format: structured
  schema:
    type: object
    properties:
      sentiment:
        type: string
        enum: [positive, negative, neutral]
      confidence:
        type: number
        minimum: 0
        maximum: 1
      keywords:
        type: array
        items:
          type: string
    required:
      - sentiment
      - confidence</code></pre>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h4>Product</h4>
          <ul class="footer-links">
            <li><a href="documentation.html">Documentation</a></li>
            <li><a href="documentation.html#quick-start">Quick Start</a></li>
            <li><a href="documentation.html#examples">Examples</a></li>
            <li><a href="documentation.html#api-reference">API Reference</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Community</h4>
          <ul class="footer-links">
            <li><a href="https://github.com/ddalcu/agent-orcha" target="_blank" rel="noopener"><i class="fa-brands fa-github"></i> GitHub</a></li>
            <li><a href="https://github.com/ddalcu/agent-orcha/issues" target="_blank" rel="noopener"><i class="fa-brands fa-github"></i> Issues</a></li>
            <li><a href="https://github.com/ddalcu/agent-orcha/discussions" target="_blank" rel="noopener"><i class="fa-brands fa-github"></i> Discussions</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Resources</h4>
          <ul class="footer-links">
            <li><a href="https://www.npmjs.com/package/agent-orcha" target="_blank" rel="noopener"><i class="fa-brands fa-npm"></i> NPM Package</a></li>
            <li><a href="https://github.com/ddalcu/agent-orcha/blob/main/README.md" target="_blank" rel="noopener"><i class="fa-brands fa-github"></i> README</a></li>
            <li><a href="https://github.com/ddalcu/agent-orcha/blob/main/LICENSE" target="_blank" rel="noopener"><i class="fa-brands fa-github"></i> License</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>About</h4>
          <ul class="footer-links">
            <li><a href="https://github.com/ddalcu" target="_blank" rel="noopener"><i class="fa-brands fa-github"></i> Author</a></li>
            <li>Version 0.0.3</li>
            <li>MIT License</li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2026 Agent Orcha. Released under the MIT License. 100% open source and forever free.</p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="assets/js/main.js"></script>
  <script src="assets/js/code-copy.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>
    document.querySelectorAll('.code-block').forEach(function(block) {
      var langLabel = block.querySelector('.code-language');
      var codeEl = block.querySelector('code');
      if (langLabel && codeEl) {
        var text = langLabel.textContent.trim().toLowerCase();
        var lang;
        if (text.includes('yaml')) lang = 'yaml';
        else if (text.includes('json')) lang = 'json';
        else if (text.includes('bash')) lang = 'bash';
        else if (text.includes('javascript') || text.includes('js')) lang = 'javascript';
        else if (text.includes('http')) lang = 'http';
        if (lang) codeEl.classList.add('language-' + lang);
      }
    });
    hljs.highlightAll();
  </script>
</body>
</html>
