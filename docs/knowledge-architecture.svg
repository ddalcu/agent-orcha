<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 850" style="background:#0d1117">
  <defs>
    <filter id="shadow" x="-4%" y="-4%" width="108%" height="108%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.4"/>
    </filter>
    <marker id="arrow-cyan" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#06b6d4"/>
    </marker>
    <marker id="arrow-amber" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#f59e0b"/>
    </marker>
    <marker id="arrow-green" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#4ade80"/>
    </marker>
    <marker id="arrow-purple" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#8b5cf6"/>
    </marker>
    <marker id="arrow-pink" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#f472b6"/>
    </marker>
    <marker id="arrow-gray" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#64748b"/>
    </marker>
    <marker id="arrow-red" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#ef4444"/>
    </marker>
    <marker id="arrow-teal" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#14b8a6"/>
    </marker>
    <marker id="arrow-blue" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#3b82f6"/>
    </marker>
    <linearGradient id="bg-grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#0d1117"/>
      <stop offset="100%" stop-color="#161b22"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="1200" height="850" fill="url(#bg-grad)"/>

  <!-- Title -->
  <text x="600" y="38" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="22" font-weight="700" fill="#e6edf3">Agent Orcha — Knowledge Layer</text>
  <text x="600" y="58" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="11" fill="#7d8590">Declarative knowledge pipelines with unified SQLite storage and automatic graph mapping</text>

  <!-- ═══════════════════════════════════════════ -->
  <!-- ROW 1: CONFIGURE                            -->
  <!-- ═══════════════════════════════════════════ -->

  <!-- YAML Config (left) -->
  <rect x="20" y="80" width="280" height="110" rx="10" fill="#1c2333" stroke="#64748b" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="160" y="102" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="12" font-weight="700" fill="#94a3b8">YAML Configuration</text>
  <text x="160" y="118" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#7d8590">*.knowledge.yaml — zero code required</text>

  <rect x="35" y="130" width="75" height="22" rx="4" fill="#1e293b" stroke="#475569" stroke-width="0.75"/>
  <text x="72" y="145" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#cbd5e1">source</text>
  <rect x="116" y="130" width="75" height="22" rx="4" fill="#1e293b" stroke="#475569" stroke-width="0.75"/>
  <text x="153" y="145" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#cbd5e1">embedding</text>
  <rect x="197" y="130" width="90" height="22" rx="4" fill="#1e293b" stroke="#475569" stroke-width="0.75"/>
  <text x="242" y="145" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#cbd5e1">search</text>

  <rect x="35" y="158" width="75" height="22" rx="4" fill="#1e293b" stroke="#8b5cf6" stroke-width="0.75" stroke-dasharray="4 2"/>
  <text x="72" y="173" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#c4b5fd">graph</text>
  <rect x="116" y="158" width="75" height="22" rx="4" fill="#1e293b" stroke="#475569" stroke-width="0.75" stroke-dasharray="4 2"/>
  <text x="153" y="173" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">reindex</text>
  <rect x="197" y="158" width="90" height="22" rx="4" fill="#1e293b" stroke="#475569" stroke-width="0.75" stroke-dasharray="4 2"/>
  <text x="242" y="173" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">loader / splitter</text>

  <!-- Arrow: Config → Manager -->
  <line x1="300" y1="135" x2="328" y2="135" stroke="#64748b" stroke-width="1.5" marker-end="url(#arrow-gray)"/>

  <!-- Knowledge Manager (center) -->
  <rect x="330" y="80" width="480" height="110" rx="10" fill="#162032" stroke="#f472b6" stroke-width="2" filter="url(#shadow)"/>
  <text x="570" y="102" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="13" font-weight="700" fill="#f472b6">Knowledge Manager</text>
  <text x="570" y="118" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#7d8590">Loads configs, manages lifecycle, hot-reload, reindex scheduling</text>

  <rect x="345" y="132" width="140" height="26" rx="5" fill="#1e293b" stroke="#f9a8d4" stroke-width="0.75"/>
  <text x="415" y="149" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#fbcfe8">Store Instances</text>
  <rect x="495" y="132" width="140" height="26" rx="5" fill="#1e293b" stroke="#f9a8d4" stroke-width="0.75"/>
  <text x="565" y="149" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#fbcfe8">Reindex Crons</text>
  <rect x="645" y="132" width="150" height="26" rx="5" fill="#1e293b" stroke="#f9a8d4" stroke-width="0.75"/>
  <text x="720" y="149" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#fbcfe8">Concurrency Control</text>

  <rect x="345" y="164" width="450" height="20" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75" stroke-dasharray="4 2"/>
  <text x="570" y="178" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">SHA-256 source hash caching — unchanged stores restore instantly</text>

  <!-- Arrow: Manager → Embeddings -->
  <line x1="810" y1="135" x2="838" y2="135" stroke="#f59e0b" stroke-width="1.5" marker-end="url(#arrow-amber)"/>

  <!-- Embedding Providers (right) -->
  <rect x="840" y="80" width="340" height="110" rx="10" fill="#1c2333" stroke="#f59e0b" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="1010" y="102" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="12" font-weight="700" fill="#f59e0b">Embedding Providers</text>
  <text x="1010" y="118" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#7d8590">Configured via llm.json</text>

  <rect x="855" y="132" width="100" height="26" rx="4" fill="#1e293b" stroke="#fbbf24" stroke-width="0.75"/>
  <text x="905" y="149" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#fde68a">OpenAI</text>
  <rect x="963" y="132" width="100" height="26" rx="4" fill="#1e293b" stroke="#fbbf24" stroke-width="0.75"/>
  <text x="1013" y="149" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#fde68a">Gemini</text>
  <rect x="1071" y="132" width="100" height="26" rx="4" fill="#1e293b" stroke="#fbbf24" stroke-width="0.75"/>
  <text x="1121" y="149" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#fde68a">Local</text>

  <rect x="855" y="164" width="316" height="20" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75" stroke-dasharray="4 2"/>
  <text x="1013" y="178" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Dimension validation, batch processing</text>

  <!-- ═══════════════════════════════════════════ -->
  <!-- ROW 2: DATA INGESTION                       -->
  <!-- ═══════════════════════════════════════════ -->

  <line x1="600" y1="190" x2="600" y2="210" stroke="#f472b6" stroke-width="1.5" marker-end="url(#arrow-pink)"/>

  <rect x="20" y="212" width="1160" height="118" rx="10" fill="#1c2333" stroke="#ef4444" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="600" y="234" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="13" font-weight="700" fill="#ef4444">Data Ingestion</text>
  <text x="600" y="250" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#7d8590">Connect any data source, parse any format, convert to vector embeddings</text>

  <!-- ── Sources ── -->
  <text x="165" y="268" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" font-weight="600" fill="#fca5a5">Data Sources</text>

  <!-- Directory -->
  <rect x="35" y="274" width="68" height="48" rx="6" fill="#1e293b" stroke="#fca5a5" stroke-width="0.75"/>
  <path d="M 60,289 L 60,285 L 66,285 L 68,287 L 78,287 L 78,289 Z M 60,289 L 60,301 L 78,301 L 78,289 Z" fill="none" stroke="#fca5a5" stroke-width="1.1" stroke-linejoin="round"/>
  <text x="69" y="316" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#fecaca">Directory</text>

  <!-- File -->
  <rect x="111" y="274" width="55" height="48" rx="6" fill="#1e293b" stroke="#fca5a5" stroke-width="0.75"/>
  <path d="M 130,285 L 137,285 L 141,289 L 141,303 L 130,303 Z M 137,285 L 137,289 L 141,289" fill="none" stroke="#fca5a5" stroke-width="1.1" stroke-linejoin="round"/>
  <text x="138" y="316" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#fecaca">File</text>

  <!-- Database -->
  <rect x="174" y="274" width="68" height="48" rx="6" fill="#1e293b" stroke="#fca5a5" stroke-width="0.75"/>
  <ellipse cx="208" cy="288" rx="8" ry="3" fill="none" stroke="#fca5a5" stroke-width="1.1"/>
  <path d="M 200,288 L 200,300" fill="none" stroke="#fca5a5" stroke-width="1.1"/>
  <path d="M 216,288 L 216,300" fill="none" stroke="#fca5a5" stroke-width="1.1"/>
  <ellipse cx="208" cy="300" rx="8" ry="3" fill="none" stroke="#fca5a5" stroke-width="1.1"/>
  <text x="208" y="316" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#fecaca">Database</text>

  <!-- Web -->
  <rect x="250" y="274" width="55" height="48" rx="6" fill="#1e293b" stroke="#fca5a5" stroke-width="0.75"/>
  <circle cx="277" cy="293" r="7" fill="none" stroke="#fca5a5" stroke-width="1.1"/>
  <ellipse cx="277" cy="293" rx="3.5" ry="7" fill="none" stroke="#fca5a5" stroke-width="0.8"/>
  <line x1="270" y1="293" x2="284" y2="293" stroke="#fca5a5" stroke-width="0.8"/>
  <text x="277" y="316" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#fecaca">Web</text>

  <!-- Arrow: Sources → Loaders -->
  <line x1="313" y1="298" x2="348" y2="298" stroke="#ef4444" stroke-width="1.2" marker-end="url(#arrow-red)"/>

  <!-- ── Document Loaders ── -->
  <text x="530" y="268" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" font-weight="600" fill="#fca5a5">Document Loaders</text>

  <!-- Text -->
  <rect x="358" y="274" width="48" height="48" rx="6" fill="#1e293b" stroke="#fca5a5" stroke-width="0.75"/>
  <line x1="371" y1="289" x2="393" y2="289" stroke="#fca5a5" stroke-width="0.8"/>
  <line x1="371" y1="293" x2="390" y2="293" stroke="#fca5a5" stroke-width="0.8"/>
  <line x1="371" y1="297" x2="393" y2="297" stroke="#fca5a5" stroke-width="0.8"/>
  <line x1="371" y1="301" x2="387" y2="301" stroke="#fca5a5" stroke-width="0.8"/>
  <text x="382" y="316" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#fecaca">Text</text>

  <!-- PDF -->
  <rect x="414" y="274" width="48" height="48" rx="6" fill="#1e293b" stroke="#fca5a5" stroke-width="0.75"/>
  <rect x="431" y="285" width="14" height="17" rx="1.5" fill="none" stroke="#fca5a5" stroke-width="1"/>
  <text x="438" y="298" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="6" font-weight="700" fill="#fca5a5">P</text>
  <text x="438" y="316" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#fecaca">PDF</text>

  <!-- CSV -->
  <rect x="470" y="274" width="48" height="48" rx="6" fill="#1e293b" stroke="#fca5a5" stroke-width="0.75"/>
  <rect x="486" y="286" width="16" height="12" rx="1" fill="none" stroke="#fca5a5" stroke-width="0.8"/>
  <line x1="486" y1="290" x2="502" y2="290" stroke="#fca5a5" stroke-width="0.6"/>
  <line x1="486" y1="294" x2="502" y2="294" stroke="#fca5a5" stroke-width="0.6"/>
  <line x1="492" y1="286" x2="492" y2="298" stroke="#fca5a5" stroke-width="0.6"/>
  <line x1="497" y1="286" x2="497" y2="298" stroke="#fca5a5" stroke-width="0.6"/>
  <text x="494" y="316" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#fecaca">CSV</text>

  <!-- JSON -->
  <rect x="526" y="274" width="48" height="48" rx="6" fill="#1e293b" stroke="#fca5a5" stroke-width="0.75"/>
  <text x="550" y="298" text-anchor="middle" font-family="monospace" font-size="12" fill="#fca5a5">{ }</text>
  <text x="550" y="316" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#fecaca">JSON</text>

  <!-- Markdown -->
  <rect x="582" y="274" width="48" height="48" rx="6" fill="#1e293b" stroke="#fca5a5" stroke-width="0.75"/>
  <text x="606" y="299" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="14" font-weight="700" fill="#fca5a5">M</text>
  <text x="606" y="316" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#fecaca">MD</text>

  <!-- HTML -->
  <rect x="638" y="274" width="56" height="48" rx="6" fill="#1e293b" stroke="#fca5a5" stroke-width="0.75"/>
  <text x="666" y="299" text-anchor="middle" font-family="monospace" font-size="11" fill="#fca5a5">&lt;/&gt;</text>
  <text x="666" y="316" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#fecaca">HTML</text>

  <!-- Arrow: Loaders → Embed -->
  <line x1="702" y1="298" x2="737" y2="298" stroke="#f59e0b" stroke-width="1.2" marker-end="url(#arrow-amber)"/>

  <!-- ── Embed ── -->
  <text x="930" y="268" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" font-weight="600" fill="#fde68a">Embed</text>

  <rect x="747" y="274" width="420" height="48" rx="6" fill="#1e293b" stroke="#f59e0b" stroke-width="1"/>
  <!-- Vector dots visualization -->
  <circle cx="770" cy="293" r="3" fill="#f59e0b" opacity="0.9"/>
  <circle cx="782" cy="289" r="2.5" fill="#f59e0b" opacity="0.7"/>
  <circle cx="793" cy="296" r="3" fill="#f59e0b" opacity="0.5"/>
  <circle cx="804" cy="291" r="2" fill="#f59e0b" opacity="0.8"/>
  <circle cx="814" cy="295" r="2.5" fill="#f59e0b" opacity="0.6"/>
  <text x="875" y="291" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#fde68a">Text → Vector Representations</text>
  <text x="875" y="305" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Batch processing with dimension validation</text>

  <!-- ═══════════════════════════════════════════ -->
  <!-- ROW 3: STORE                                -->
  <!-- ═══════════════════════════════════════════ -->

  <line x1="600" y1="330" x2="600" y2="350" stroke="#4ade80" stroke-width="1.5" marker-end="url(#arrow-green)"/>

  <rect x="20" y="352" width="1160" height="140" rx="10" fill="#1c2333" stroke="#4ade80" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="600" y="374" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="13" font-weight="700" fill="#4ade80">SQLite Persistence</text>
  <text x="600" y="390" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#7d8590">Everything stored in SQLite + sqlite-vec — one file per knowledge store, no external databases</text>

  <!-- SQLiteStore (left) -->
  <rect x="35" y="404" width="540" height="76" rx="8" fill="#162032" stroke="#4ade80" stroke-width="1"/>
  <text x="305" y="424" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="11" font-weight="600" fill="#86efac">SQLiteStore</text>

  <rect x="50" y="434" width="120" height="34" rx="4" fill="#1e293b" stroke="#4ade80" stroke-width="0.75"/>
  <text x="110" y="449" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#86efac">Chunks</text>
  <text x="110" y="462" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Document content</text>

  <rect x="180" y="434" width="120" height="34" rx="4" fill="#1e293b" stroke="#8b5cf6" stroke-width="0.75"/>
  <text x="240" y="449" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#c4b5fd">Entities</text>
  <text x="240" y="462" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Graph nodes</text>

  <rect x="310" y="434" width="120" height="34" rx="4" fill="#1e293b" stroke="#8b5cf6" stroke-width="0.75"/>
  <text x="370" y="449" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#c4b5fd">Relationships</text>
  <text x="370" y="462" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Graph edges</text>

  <rect x="440" y="434" width="120" height="34" rx="4" fill="#1e293b" stroke="#f59e0b" stroke-width="0.75"/>
  <text x="500" y="449" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#fde68a">Vectors</text>
  <text x="500" y="462" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">sqlite-vec KNN index</text>

  <!-- DirectMapper (right) -->
  <rect x="595" y="404" width="570" height="76" rx="8" fill="#162032" stroke="#8b5cf6" stroke-width="1"/>
  <text x="880" y="424" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="11" font-weight="600" fill="#c4b5fd">DirectMapper</text>

  <rect x="610" y="434" width="260" height="34" rx="4" fill="#1e293b" stroke="#8b5cf6" stroke-width="0.75"/>
  <text x="740" y="449" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#c4b5fd">Structured Data → Knowledge Graph</text>
  <text x="740" y="462" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Deterministic column mapping — no LLM needed</text>

  <rect x="880" y="434" width="270" height="34" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75" stroke-dasharray="4 2"/>
  <text x="1015" y="449" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#7d8590">Optional — only for structured sources</text>
  <text x="1015" y="462" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">CSV, DB, JSON → entities + relationships automatically</text>

  <!-- ═══════════════════════════════════════════ -->
  <!-- ROW 4: SEARCH                               -->
  <!-- ═══════════════════════════════════════════ -->

  <line x1="600" y1="492" x2="600" y2="512" stroke="#14b8a6" stroke-width="1.5" marker-end="url(#arrow-teal)"/>

  <rect x="20" y="514" width="1160" height="98" rx="10" fill="#1c2333" stroke="#14b8a6" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="600" y="536" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="13" font-weight="700" fill="#14b8a6">Unified Search</text>
  <text x="600" y="552" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#7d8590">Combined text + graph search — results merged and ranked by relevance score</text>

  <rect x="35" y="566" width="170" height="34" rx="6" fill="#1e293b" stroke="#14b8a6" stroke-width="1"/>
  <text x="120" y="581" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#5eead4">Embed Query</text>
  <text x="120" y="594" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Vectorize the question</text>

  <line x1="205" y1="583" x2="228" y2="583" stroke="#14b8a6" stroke-width="1" marker-end="url(#arrow-teal)"/>

  <rect x="230" y="566" width="185" height="34" rx="6" fill="#1e293b" stroke="#4ade80" stroke-width="1"/>
  <text x="322" y="581" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#86efac">Chunk Search</text>
  <text x="322" y="594" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Find similar text passages</text>

  <line x1="415" y1="583" x2="438" y2="583" stroke="#14b8a6" stroke-width="1" marker-end="url(#arrow-teal)"/>

  <rect x="440" y="566" width="185" height="34" rx="6" fill="#1e293b" stroke="#8b5cf6" stroke-width="1"/>
  <text x="532" y="581" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#c4b5fd">Entity Search</text>
  <text x="532" y="594" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Find matching graph nodes</text>

  <line x1="625" y1="583" x2="648" y2="583" stroke="#14b8a6" stroke-width="1" marker-end="url(#arrow-teal)"/>

  <rect x="650" y="566" width="185" height="34" rx="6" fill="#1e293b" stroke="#8b5cf6" stroke-width="1"/>
  <text x="742" y="581" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#c4b5fd">Graph Expansion</text>
  <text x="742" y="594" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Explore connected entities</text>

  <line x1="835" y1="583" x2="858" y2="583" stroke="#14b8a6" stroke-width="1" marker-end="url(#arrow-teal)"/>

  <rect x="860" y="566" width="308" height="34" rx="6" fill="#162032" stroke="#14b8a6" stroke-width="1"/>
  <text x="1014" y="581" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#5eead4">Merge &amp; Rank</text>
  <text x="1014" y="594" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Combine all results, score, and return top matches</text>

  <!-- ═══════════════════════════════════════════ -->
  <!-- ROW 5: AGENT TOOLS                          -->
  <!-- ═══════════════════════════════════════════ -->

  <line x1="600" y1="612" x2="600" y2="632" stroke="#3b82f6" stroke-width="1.5" marker-end="url(#arrow-blue)"/>

  <rect x="20" y="634" width="1160" height="70" rx="10" fill="#162032" stroke="#3b82f6" stroke-width="2" filter="url(#shadow)"/>
  <text x="600" y="656" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="13" font-weight="700" fill="#3b82f6">Agent Knowledge Tools</text>
  <text x="600" y="672" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="9" fill="#7d8590">Auto-generated tools registered in the Tool Registry — agents reference via knowledge:&lt;store-name&gt;</text>

  <rect x="55" y="682" width="120" height="16" rx="4" fill="#1e293b" stroke="#60a5fa" stroke-width="0.75"/>
  <text x="115" y="694" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#93c5fd">knowledge_search</text>

  <rect x="185" y="682" width="120" height="16" rx="4" fill="#1e293b" stroke="#60a5fa" stroke-width="0.75"/>
  <text x="245" y="694" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#93c5fd">knowledge_traverse</text>

  <rect x="315" y="682" width="140" height="16" rx="4" fill="#1e293b" stroke="#60a5fa" stroke-width="0.75"/>
  <text x="385" y="694" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#93c5fd">knowledge_entity_lookup</text>

  <rect x="465" y="682" width="145" height="16" rx="4" fill="#1e293b" stroke="#60a5fa" stroke-width="0.75"/>
  <text x="537" y="694" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#93c5fd">knowledge_graph_schema</text>

  <rect x="620" y="682" width="100" height="16" rx="4" fill="#1e293b" stroke="#60a5fa" stroke-width="0.75"/>
  <text x="670" y="694" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#93c5fd">knowledge_sql</text>

  <rect x="740" y="682" width="200" height="16" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75" stroke-dasharray="3 2"/>
  <text x="840" y="694" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">All stores get: search + sql</text>

  <rect x="950" y="682" width="210" height="16" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.75" stroke-dasharray="3 2"/>
  <text x="1055" y="694" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">With graph: + traverse, lookup, schema</text>

  <!-- ═══════════════════════════════════════════ -->
  <!-- BOTTOM: KEY HIGHLIGHTS                      -->
  <!-- ═══════════════════════════════════════════ -->

  <rect x="20" y="730" width="1160" height="100" rx="10" fill="#1c2333" stroke="#64748b" stroke-width="1" filter="url(#shadow)"/>
  <text x="600" y="754" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="12" font-weight="700" fill="#94a3b8">Key Highlights</text>

  <rect x="35" y="770" width="218" height="48" rx="6" fill="#1e293b" stroke="#4ade80" stroke-width="0.75"/>
  <text x="144" y="787" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#86efac">Zero Dependencies</text>
  <text x="144" y="802" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">SQLite + sqlite-vec only</text>
  <text x="144" y="813" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">No external vector databases</text>

  <rect x="263" y="770" width="218" height="48" rx="6" fill="#1e293b" stroke="#06b6d4" stroke-width="0.75"/>
  <text x="372" y="787" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#67e8f9">Instant Restart</text>
  <text x="372" y="802" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">SHA-256 source hash caching</text>
  <text x="372" y="813" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Unchanged stores restore from disk</text>

  <rect x="491" y="770" width="218" height="48" rx="6" fill="#1e293b" stroke="#8b5cf6" stroke-width="0.75"/>
  <text x="600" y="787" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#c4b5fd">Automatic Graphs</text>
  <text x="600" y="802" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">DirectMapper builds knowledge graphs</text>
  <text x="600" y="813" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">from structured data — no LLM cost</text>

  <rect x="719" y="770" width="218" height="48" rx="6" fill="#1e293b" stroke="#f59e0b" stroke-width="0.75"/>
  <text x="828" y="787" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#fde68a">Scheduled Reindex</text>
  <text x="828" y="802" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Cron-based data refresh</text>
  <text x="828" y="813" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Keep knowledge stores current</text>

  <rect x="947" y="770" width="218" height="48" rx="6" fill="#1e293b" stroke="#f472b6" stroke-width="0.75"/>
  <text x="1056" y="787" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="10" font-weight="600" fill="#f9a8d4">Declarative Config</text>
  <text x="1056" y="802" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="8" fill="#7d8590">Define in YAML, not code</text>
  <text x="1056" y="813" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="7" fill="#7d8590">Hot-reload on file change</text>

</svg>
