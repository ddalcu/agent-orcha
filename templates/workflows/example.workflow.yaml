name: research-pipeline
description: Multi-step research pipeline that searches knowledge bases and produces a friendly summary
version: "1.0.0"
type: steps

input:
  schema:
    topic:
      type: string
      required: true
      description: The research topic or question

steps:

  # Step 1: Search web knowledge for background information
  - id: web-research
    agent: knowledge-broker
    input:
      query: "Find information about {{input.topic}}"
    output:
      key: web_findings

  # Step 2: Search org chart to find relevant people in the company
  - id: find-experts
    agent: knowledge-broker
    input:
      query: "Who in the company has expertise related to {{input.topic}}?"
    output:
      key: expert_findings

  # Step 3: Summarize everything into a friendly report
  - id: summarize
    agent: chatbot
    input:
      query: |
        Write a brief research summary on: {{input.topic}}

        Background Research:
        {{steps.web-research.output}}

        Internal Experts:
        {{steps.find-experts.output}}

        Combine these into a clear, concise report with sections for background context and recommended contacts.
    output:
      key: final_report

config:
  timeout: 300000
  onError: stop

output:
  research: "{{steps.web-research.output}}"
  experts: "{{steps.find-experts.output}}"
  summary: "{{steps.summarize.output}}"

metadata:
  category: example
  tags:
    - demo
    - workflow
    - multi-agent
    - knowledge-search
